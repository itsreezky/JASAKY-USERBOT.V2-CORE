const a0x=a0d;(function(a,b){const u=a0d,c=a();while(!![]){try{const d=parseInt(u(0x12e))/0x1*(-parseInt(u(0x13a))/0x2)+-parseInt(u(0x130))/0x3+parseInt(u(0x126))/0x4*(-parseInt(u(0x121))/0x5)+parseInt(u(0x127))/0x6+-parseInt(u(0x122))/0x7+-parseInt(u(0x12f))/0x8+-parseInt(u(0x13b))/0x9*(-parseInt(u(0x124))/0xa);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0c,0x88da2));const a0b=(function(){let a=!![];return function(b,c){const d=a?function(){const v=a0d;if(c){const e=c[v(0x137)](b,arguments);return c=null,e;}}:function(){};return a=![],d;};}()),a0a=a0b(this,function(){const w=a0d;return a0a[w(0x13e)]()['search']('(((.+)+)+)+$')['toString']()['constructor'](a0a)['search'](w(0x12a));});function a0d(a,b){const c=a0c();return a0d=function(d,e){d=d-0x11c;let f=c[d];if(a0d['udbANw']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='',p=n+g;for(let q=0x0,r,s,t=0x0;s=l['charAt'](t++);~s&&(r=q%0x4?r*0x40+s:s,q++%0x4)?n+=p['charCodeAt'](t+0xa)-0xa!==0x0?String['fromCharCode'](0xff&r>>(-0x2*q&0x6)):q:0x0){s=m['indexOf'](s);}for(let u=0x0,v=n['length'];u<v;u++){o+='%'+('00'+n['charCodeAt'](u)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a0d['Ycjant']=g,a=arguments,a0d['udbANw']=!![];}const h=c[0x0],i=d+h,j=a[i];if(!j){const k=function(l){this['vptWtU']=l,this['fYqRka']=[0x1,0x0,0x0],this['pHlQNx']=function(){return'newState';},this['yTzIuX']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['FCAwoH']='[\x27|\x22].+[\x27|\x22];?\x20*}';};k['prototype']['dufAtv']=function(){const l=new RegExp(this['yTzIuX']+this['FCAwoH']),m=l['test'](this['pHlQNx']['toString']())?--this['fYqRka'][0x1]:--this['fYqRka'][0x0];return this['UNWpVW'](m);},k['prototype']['UNWpVW']=function(l){if(!Boolean(~l))return l;return this['hmuyYV'](this['vptWtU']);},k['prototype']['hmuyYV']=function(l){for(let m=0x0,n=this['fYqRka']['length'];m<n;m++){this['fYqRka']['push'](Math['round'](Math['random']())),n=this['fYqRka']['length'];}return l(this['fYqRka'][0x0]);},new k(a0d)['dufAtv'](),f=a0d['Ycjant'](f),a[i]=f;}else f=j;return f;},a0d(a,b);}a0a();const parseToHTMLHelpers=require(a0x(0x134)),kembaliButton={'reply_markup':{'inline_keyboard':[[{'text':'⬅️\x20Kembali\x20ke\x20Sistem\x20BOT','callback_data':a0x(0x11d)}]]}},kembaliLihatWM={'reply_markup':{'inline_keyboard':[[{'text':a0x(0x11f),'callback_data':a0x(0x128)}]]}};function a0c(){const D=['cGKjcq','mtbjEgfpDMm','4QYf77IpieTLBwjHBgKGA2uGu2LZDgvTiejpva','mtu2mdrzAffcDeq','nJi5oti4wuzIrMjv','l2f0DxjxyxrLCM1HCMS','cVcFLOVVUi8Gpgi+ugvUz2f0DxjHBIbxyxrLCM1HCMS8l2i+cGO8yJ5xyxrLCM1HCMSGmsaTiefRDw4GtuvnqKvsl1zjudO8l2i+cG','kcGOlISPkYKRksSK','4P2mievYCM9Yigf0DxjxyxrLCM1HCMS6','BwvZC2fNzv9Pza','DwjHAf93Bv8X','odznDM9TzKi','mtKZnZm5mKDABw5cDa','mtm3mZm0ouDLzKPkza','zgf0yq','DhjPBq','kgTVC29UzYK','lI4VlI4VlI4VlI4VC3LZDgvTl2HLBhbLCNmVCgfYC2vuB0HutuXizwXWzxjZ','yxr1CLDHDgvYBwfYAW','C2vUze1LC3nHz2u','yxbWBhK','ChvZAa','D2f0zxjTyxjR','mJqWodr4zwHlELK','mZiZoti1mZLbCvjVA0G','AwruyxjNzxq','y2fSBgjHy2TFCxvLCNK','Dg9tDhjPBMC','yw5ZD2vYq2fSBgjHy2TrDwvYEq','l3nPC3rLBujVDa','CMvTB3zLtgLZDgvUzxi','4QYf77IpieXPAgf0ifDHDgvYBwfYAW','sfrnta','mteWnvftDMjyyG','mZGYmtq2mxPZz1f6rG'];a0c=function(){return D;};return a0c();}module['exports']=async function aturWatermarkHandler(a,b,c,d){const y=a0x,{db:e}=d,f=b['chat']['id'],g=b['from']['id'];c[y(0x135)]={};const h=[];try{const [i]=await e['execute']('SELECT\x20id,\x20watermark\x20FROM\x20pengaturan_watermark_userbot\x20WHERE\x20id\x20IN\x20(1,2)\x20ORDER\x20BY\x20id\x20ASC'),j=i['find'](s=>s['id']===0x1)?.['watermark']||y(0x133),k=i['find'](s=>s['id']===0x2)?.[y(0x139)]||'(kosong)',l=await a[y(0x136)](f,(y(0x129)+j+'\x0a\x0a<b>Watermark\x202\x20-\x20Akun\x20JASEB:</b>\x0a'+k+'\x0a\x0aPilih\x20watermark\x20yang\x20ingin\x20diubah:\x0a\x09\x09')['trim'](),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'🖋️\x20Ubah\x20Watermark\x201','callback_data':'ubah_wm_1'},{'text':'🖋️\x20Ubah\x20Watermark\x202','callback_data':'ubah_wm_2'}],[{'text':y(0x125),'callback_data':y(0x11d)}]]}});h[y(0x138)](l['message_id']);const m=await waitForInline(a,g,[y(0x12d),'ubah_wm_2']),n=m===y(0x12d)?0x1:0x2;c['aturWatermark'][y(0x13c)]=n;const o=await a['sendMessage'](f,'\x0a🧩\x20<b>Masukkan\x20Watermark\x20Baru</b>\x0a\x0aKetik\x20watermark\x20baru\x20menggunakan\x20HTML\x20visual\x20seperti:\x0a\x0a<b>Contoh:</b>\x0a<b>🔥\x20Bold</b>\x0a<i>🔥\x20Italic</i>\x0a<a\x20href=\x22https://t.me/jasaky_id\x22>🔥\x20Link</a>\x0a\x09\x09\x09'['trim'](),{'parse_mode':y(0x120),'reply_markup':kembaliButton});h['push'](o['message_id']);const p=await waitForUserMessage(a,g);h['push'](p[y(0x12c)]);const q=parseToHTMLHelpers(p);if(!q||q[y(0x132)]()==='')return a['sendMessage'](f,'⚠️\x20Watermark\x20tidak\x20boleh\x20kosong.',kembaliButton);await e['execute']('UPDATE\x20pengaturan_watermark_userbot\x20SET\x20watermark\x20=\x20?\x20WHERE\x20id\x20=\x20?',[q,n]);for(const r of h){try{await a['deleteMessage'](f,r);}catch(s){}}await a['sendMessage'](f,('\x0a✅\x20<b>Watermark\x20'+n+'\x20berhasil\x20diperbarui!</b>\x0a\x0a<i>Preview\x20Baru:</i>\x0a'+q+y(0x123))['trim'](),{'parse_mode':'HTML',...kembaliLihatWM});}catch(t){console['error'](y(0x12b),t['message']),await a['sendMessage'](f,'❌\x20Terjadi\x20kesalahan\x20saat\x20proses.',kembaliButton);}},module['exports']['onCallbackQuery']=async function(a,b,c){const z=a0x,d=['ubah_wm_1','ubah_wm_2'];d['includes'](b['data'])&&await a[z(0x11c)](b['id']);};function waitForInline(a,b,c=[]){return new Promise(d=>{const B=a0d,e=f=>{const A=a0d;f['from']['id']===b&&c['includes'](f['data'])&&(a['removeListener']('callback_query',e),d(f[A(0x131)]));};a['on'](B(0x13d),e);});}function waitForUserMessage(a,b){return new Promise(c=>{const d=e=>{const C=a0d;e['from']['id']===b&&(a[C(0x11e)]('message',d),c(e));};a['on']('message',d);});}