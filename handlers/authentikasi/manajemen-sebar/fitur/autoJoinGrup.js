const a0F=a0d;(function(a,b){const D=a0d,c=a();while(!![]){try{const d=-parseInt(D(0x1e1))/0x1*(-parseInt(D(0x1fd))/0x2)+parseInt(D(0x1e4))/0x3+parseInt(D(0x1f3))/0x4*(parseInt(D(0x1de))/0x5)+-parseInt(D(0x1e9))/0x6*(parseInt(D(0x1fa))/0x7)+-parseInt(D(0x1fe))/0x8*(-parseInt(D(0x1f6))/0x9)+-parseInt(D(0x1d4))/0xa+-parseInt(D(0x200))/0xb;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0c,0x7aa45));const a0b=(function(){let a=!![];return function(b,c){const d=a?function(){if(c){const e=c['apply'](b,arguments);return c=null,e;}}:function(){};return a=![],d;};}()),a0a=a0b(this,function(){const E=a0d;return a0a['toString']()['search'](E(0x207))['toString']()['constructor'](a0a)[E(0x1f5)]('(((.+)+)+)+$');});a0a();const {spawn}=require('child_process'),path=require('path'),pythonScript=path[a0F(0x205)](__dirname,'../../../../system/services/autojoin-grup.py'),pendingAutoJoins={},kembaliButton={'reply_markup':{'keyboard':[[a0F(0x1d2)]],'resize_keyboard':!![],'one_time_keyboard':!![]}};function runPython(a){return new Promise((b,c)=>{const G=a0d,d=spawn(G(0x1dc),[pythonScript]);let e='';d[G(0x1ce)]['on']('data',f=>e+=f['toString']()),d[G(0x1d9)]['on']('data',f=>console['error'](G(0x1e5),f[G(0x1f7)]())),d['on'](G(0x203),()=>{const H=G;try{const f=JSON['parse'](e);b(f);}catch(g){console['error'](H(0x1ee),g),c(new Error('Gagal\x20memproses\x20respons\x20dari\x20backend.'));}}),d['stdin']['write'](JSON[G(0x1da)](a)),d['stdin'][G(0x1d0)]();});}async function handleAutoJoinInput(a,b,c,d){const I=a0F,{db:e,getDataUserbot:f}=d,g=await f(),{apiId:h,apiHash:i,dbHost:j,dbPort:k,dbUser:l,dbPass:m,dbName:n}=g,o=b['from']['id'],p=b['chat']['id'],q=b['original_from_id']||b[I(0x1d5)]['id'];let r;try{const [w]=await e['query'](I(0x1fb),[q]);if(w[I(0x204)]>0x0)r=w[0x0][I(0x201)];}catch(x){console['error']('Gagal\x20cek\x20kontrol:',x);}finally{}const s=r||q,t=b['text'][I(0x1e7)]('\x0a')['map'](y=>y['trim']()),u=t[I(0x1d3)](0x1)['map'](y=>y[I(0x1f9)](/^@/,''))['filter'](Boolean);if(u[I(0x204)]>0x5)return a[I(0x1f8)](p,'⚠️\x20Maksimal\x20hanya\x20boleh\x205\x20grup\x20per\x20proses\x20join.\x0aSilakan\x20proses\x20ulang\x20dengan\x20maksimal\x205\x20@username.',kembaliButton);if(!u['length'])return a['sendMessage'](p,'⚠️\x20Mohon\x20masukkan\x20minimal\x20satu\x20username\x20grup\x20(diawali\x20dengan\x20@,\x20satu\x20per\x20baris).',kembaliButton);const v=await a['sendMessage'](p,'🔍\x20Sedang\x20memvalidasi\x20grup\x20yang\x20kamu\x20kirim...');try{const y=await runPython({'mode':'VALIDATE_GROUPS','id_telegram':s,'groups':u,'api_id':h,'api_hash':i,'db_config':{'host':j,'user':l,'password':m,'database':n,'port':Number(k||0xcea)}});if(y[I(0x1e2)]!=='OK'||!y['groups']['length']){await a[I(0x1d6)](I(0x1dd),{'chat_id':p,'message_id':v['message_id'],'reply_markup':{'inline_keyboard':[[{'text':'⬅️\x20KEMBALI\x20KE\x20MANAJEMEN\x20SEBAR','callback_data':'/manajemenSebar'}]]}});return;}pendingAutoJoins[s]=y['groups'];const z=y['groups'][I(0x1f2)]((A,B)=>B+0x1+'.\x20@'+A['username']+'\x20-\x20'+A[I(0x1db)])[I(0x202)]('\x0a');await a['editMessageText']('📋\x20Berikut\x20daftar\x20grup\x20yang\x20ditemukan:\x0a\x0a'+z+I(0x1f4),{'chat_id':p,'message_id':v['message_id'],'reply_markup':{'inline_keyboard':[[{'text':I(0x1ff),'callback_data':'konfirmasiAutoJoin'}],[{'text':I(0x209),'callback_data':I(0x1f0)}]]}});}catch(A){await a['editMessageText'](I(0x208)+A['message'],{'chat_id':p,'message_id':v['message_id'],'reply_markup':{'inline_keyboard':[[{'text':'⬅️\x20KEMBALI\x20KE\x20MANAJEMEN\x20SEBAR','callback_data':'/manajemenSebar'}]]}});}finally{}}function a0d(a,b){const c=a0c();return a0d=function(d,e){d=d-0x1ce;let f=c[d];if(a0d['mtFIQX']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='',p=n+g;for(let q=0x0,r,s,t=0x0;s=l['charAt'](t++);~s&&(r=q%0x4?r*0x40+s:s,q++%0x4)?n+=p['charCodeAt'](t+0xa)-0xa!==0x0?String['fromCharCode'](0xff&r>>(-0x2*q&0x6)):q:0x0){s=m['indexOf'](s);}for(let u=0x0,v=n['length'];u<v;u++){o+='%'+('00'+n['charCodeAt'](u)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a0d['QeXcPB']=g,a=arguments,a0d['mtFIQX']=!![];}const h=c[0x0],i=d+h,j=a[i];if(!j){const k=function(l){this['quKVhh']=l,this['ooWYNn']=[0x1,0x0,0x0],this['uynGWv']=function(){return'newState';},this['nYnjoM']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['qnxwjd']='[\x27|\x22].+[\x27|\x22];?\x20*}';};k['prototype']['XHSWwa']=function(){const l=new RegExp(this['nYnjoM']+this['qnxwjd']),m=l['test'](this['uynGWv']['toString']())?--this['ooWYNn'][0x1]:--this['ooWYNn'][0x0];return this['wpwLeB'](m);},k['prototype']['wpwLeB']=function(l){if(!Boolean(~l))return l;return this['bcdunT'](this['quKVhh']);},k['prototype']['bcdunT']=function(l){for(let m=0x0,n=this['ooWYNn']['length'];m<n;m++){this['ooWYNn']['push'](Math['round'](Math['random']())),n=this['ooWYNn']['length'];}return l(this['ooWYNn'][0x0]);},new k(a0d)['XHSWwa'](),f=a0d['QeXcPB'](f),a[i]=f;}else f=j;return f;},a0d(a,b);}async function handleKonfirmasiJoin(a,b,c,d){const J=a0F,{db:e,getDataUserbot:f}=d,g=await f(),{apiId:h,apiHash:i,dbHost:j,dbPort:k,dbUser:l,dbPass:m,dbName:n}=g,o=b['message']['chat']['id'],p=b[J(0x1d7)][J(0x1e0)],q=b['original_from_id']||b['from']['id'];let r;try{const [x]=await e['query'](J(0x1fb),[q]);if(x['length']>0x0)r=x[0x0][J(0x201)];}catch(y){console['error'](J(0x1d8),y);}finally{}const s=r||q,t=pendingAutoJoins[s];if(!t||t[J(0x204)]===0x0)return a['editMessageText']('⚠️\x20Tidak\x20ada\x20grup\x20yang\x20siap\x20untuk\x20diproses.',{'chat_id':o,'message_id':p,'reply_markup':{'inline_keyboard':[[{'text':'⬅️\x20KEMBALI\x20KE\x20MANAJEMEN\x20SEBAR','callback_data':'/manajemenSebar'}]]}});await a[J(0x1d6)](J(0x1ec),{'chat_id':o,'message_id':p});const u=await a['sendMessage'](o,generateProgressBar(0x0));let v=0x0;const w=setInterval(async()=>{if(v<0x5f){v+=0x2;try{await a['editMessageText'](generateProgressBar(v),{'chat_id':o,'message_id':u['message_id']});}catch{}}},0x1f4);try{const z=await runPython({'mode':'JOIN_GROUPS','id_telegram':s,'groups':t,'api_id':h,'api_hash':i,'db_config':{'host':j,'user':l,'password':m,'database':n,'port':Number(k||0xcea)}});clearInterval(w),await a['editMessageText'](generateProgressBar(0x64),{'chat_id':o,'message_id':u[J(0x1e0)]});const A=z['joined']['map']((B,C)=>C+0x1+'.\x20@'+B['username']+'\x20-\x20https://t.me/'+B['username'])['join']('\x0a');await a['sendMessage'](o,J(0x1fc)+z[J(0x1e3)][J(0x204)]+'\x20grup\x20berikut:\x0a\x0a'+A,kembaliButton);}catch(B){clearInterval(w),await a['sendMessage'](o,J(0x1ed)+B['message'],kembaliButton);}finally{delete pendingAutoJoins[s];}}function generateProgressBar(a){const K=a0F,b=0x14,c=Math['round'](a/0x64*b),d=b-c;return'📈\x20Progress:\x20['+'█'[K(0x1e8)](c)+'░'['repeat'](d)+']\x20'+a+'%';}module['exports']=async function autoJoinGrupHandler(a,b,c,d){const L=a0F,{db:e}=d,f=b[L(0x1d1)]?.['id']||b['message']?.[L(0x1d1)]?.['id'];if(b['callbackQuery']){const g=b[L(0x1f1)]['data'];if(g===L(0x1eb))return handleKonfirmasiJoin(a,b[L(0x1f1)]);else{if(g==='batalAutoJoin'){await a['editMessageText']('❌\x20Proses\x20join\x20dibatalkan.\x20Kamu\x20bisa\x20kembali\x20dan\x20mulai\x20ulang\x20jika\x20diperlukan.',{'chat_id':b[L(0x1f1)][L(0x1d7)]['chat']['id'],'message_id':b['callbackQuery']['message'][L(0x1e0)],'reply_markup':{'inline_keyboard':[[{'text':'⬅️\x20KEMBALI\x20KE\x20MANAJEMEN\x20SEBAR','callback_data':L(0x1e6)}]]}});const h=b['callbackQuery'][L(0x1d5)]['id'];let i;try{const [l]=await e['query'](L(0x1fb),[h]);if(l[L(0x204)]>0x0)i=l[0x0]['id_telegram_dikontrol'];}catch{}const j=i||h,k=Boolean(i);delete pendingAutoJoins[j];return;}}}if(b['text']&&b[L(0x1ef)]['trim']()[L(0x1cf)]()[L(0x1df)]('AUTOJOIN'))return handleAutoJoinInput(a,b);await a['sendMessage'](f,L(0x1ea),{'parse_mode':L(0x206),...kembaliButton});};function a0c(){const M=['mtuXntyWANvsANzR','Dg9tDhjPBMC','C2vUze1LC3nHz2u','CMvWBgfJzq','nJeZow5YCNrUyG','u0vmrunuigLKx3rLBgvNCMfTx2rPA29UDhjVBcbguK9nigTVBNrYB2XFC2vZC2LVBNnFDxnLCMjVDcbxsevsrsbPzf90zwXLz3jHBv9Wzw5NB250CM9Sid0GpYbbtKqGywT0AwyGpsb0CNvLieXjtuLuide','4PYfiejLCMHHC2LSig1LBNLPBxbHBIbNCNvWigrHBIbIzxjNywj1BMCGA2uG','mtuYmejjDfvJDW','ndHTrvn0DwK','4PYfiePVAw4GzgfUifnPBxbHBG','nJuXnJG3m0ryAuDMtq','AwrFDgvSzwDYyw1FzgLRB250CM9S','AM9PBG','y2XVC2u','BgvUz3rO','CMvZB2X2zq','twfYA2rVD24','kcGOlISPkYKRksSK','4P2mifrLCMPHzgKGA2vZywXHAgfUihnHyxqGDMfSAwrHC2K6cG','4P2miejHDgfS','C3rKB3v0','Dg9vChbLCKnHC2u','zw5K','y2HHDa','4QYf77IpieTftujbteKGs0uGtufoquPftuvoifnfqKfs','C2XPy2u','mJa1nZyXmhLhA2ThtG','zNjVBq','zwrPDe1LC3nHz2vuzxH0','BwvZC2fNzq','r2fNywWGy2vRigTVBNrYB2W6','C3rKzxjY','C3rYAw5NAwz5','DgL0Bgu','ChL0Ag9UmW','4P2mifrPzgfRigrPDgvTDwTHBIbNCNvWihLHBMCGDMfSAwqGzgfYAsbKywz0yxiGEwfUzYbRyw11igTPCMLTlIbqyxn0AwTHBIbZzw11ysbaDxnLCM5HBwuGyMvUyxiGzgfUigDYDxaGyMLZysbKAwfRC2vZlG','mJm1nwTQtKrHtq','C3rHCNrZv2L0Aa','BwvZC2fNzv9Pza','mti1ngDsuMTorq','C3rHDhvZ','AM9PBMvK','mtCZoti1uw5HEwT2','w1bzveHptIbfuLjpuL0','l21HBMfQzw1LBLnLyMfY','C3bSAxq','CMvWzwf0','mtuZmeP2uMz3sG','8j+tPsaQqxv0BYbkB2LUieDYDxaQcGPlAxjPBsbKywz0yxiGDxnLCM5HBwuGz3j1Ccb5yw5NigLUz2LUigTHBxuGBwfZDwTPlcbKzw5Nyw4GzM9YBwf0ihnLCgvYDgKGAw5PoGOkqvvut0Ppsu4kqg5HBwfNCNvWmqPaBMfTywDYDxaYcKbUyw1Hz3j1CdmkcIPdyxrHDgfUihbLBNrPBMC6kGOTifbHC3rPA2fUigTHBxuGBwvUz2f3ywXPigrLBMDHBIbRyxrHicjbvvrpsK9jtIiGzgKGyMfYAxmGCgvYDgfTys4klsbhDw5HA2fUihnHDhuGDxnLCM5HBwuGCgvYigjHCMLZlGOTie1HC3vRyw4GBwfRC2LTywWGnsb1C2vYBMfTzsbWzxiGChjVC2vZicHtzxn1ywKGqxr1CMfUifrLBgvNCMfTkqOTifbHC3rPA2fUigDYDxaGyMLZysbKAwfRC2vZihb1yMXPAYbKyw4GDgLKywSGzgLRDw5JAs4klsbqyxn0AwTHBIbRyw11ihrPzgfRig1LBgvIAwHPigjHDgfZigPVAw4Gz3j1CcbKyxjPifrLBgvNCMfTlGOku2v0zwXHAcbKAwTPCMLTlcbIB3qGywTHBIbTzw12ywXPzgfZAsbKywz0yxiGDgvYC2vIDxqGzgfUig1LBwLUDgeGA29UzMLYBwfZAsb1BNr1AYbTDwXHAsbWCM9ZzxmGAM9PBI4','A29UzMLYBwfZAuf1Dg9kB2LU','8j+uHcbtzwrHBMCGBwvTDwXHAsbWCM9ZzxmGAM9PBIbRzsbNCNvWlwDYDxaGEwfUzYbKAxbPBgLOlcbTB2HVBIb0Dw5Nz3uUlI4','4P2mifrLCMPHzgKGA2vZywXHAgfUihnHyxqGChjVC2vZigPVAw46cG','w1bbuLnfievsuK9sxq','Dgv4Da','yMf0ywXbDxrVsM9PBG','y2fSBgjHy2TrDwvYEq','BwfW','mZuWmgDjEKfjCG','cGPbCgfRywGGA2fTDsbPBMDPBIbTzwXHBMP1DgTHBIbWCM9ZzxmGAM9PBIbRzsbNCNvWlwDYDxaGDgvYC2vIDxq/','C2vHCMnO'];a0c=function(){return M;};return a0c();}