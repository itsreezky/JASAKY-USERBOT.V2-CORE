function a0c(){const a2=['C3rHDhvZ','Dg9tDhjPBMC','BwvZC2fNzq','BwfW','4P2mieDHz2fSig1LBxvHDcb1BgfUzYbNCNvW','odG2nduXmgDZCNHNua','C3rHCNrZv2L0Aa','zNjVBq','nta0nZy4D2XgEvbJ','cIaGicaGifnftevdvcbPzf90zwXLz3jHBv9KAwTVBNrYB2WGrLjptsbRB250CM9Sx3nLC3nPB25Zx3vZzxjIB3qkicaGicaGv0HfuKuGAwrFDgvSzwDYyw1FCgvUz29UDhjVBca9id8Gqu5eigfRDgLMid0GDhj1zqOGicaGicbmsu1jvcaXcIaGica','BMfTyv9KzxbHBG','4PQG77IpifrPzgfRigfKysbNCNvWigjHCNuGEwfUzYbIAxnHigTHBxuGDgfTyMfOA2fUlG','cIaGicbtruXfq1qGBMfTyv9KzxbHBIWGBMfTyv9IzwXHA2fUzYbguK9nihbLBMDNDw5Hx3vZzxjIB3qGv0HfuKuGAwrFDgvSzwDYyw0Gpsa/cIaG','kcGOlISPkYKRksSK','Dg9Nz2XLz3j1CdO','DgL0Bgu','zgf0yq','BwvZC2fNzv9Pza','C3rKzxjY','BgvUz3rO','CMvWzwf0','mZC0nJvbuxDuCxK','CgfYC2u','zgvSzxrLtwvZC2fNzq','C2vSzxnHAwDYDxa','4PYfifrVDgfSifrLCNbPBgLOoIa','CxvLCNK','BMfTyv9IzwXHA2fUzW','zMLSDgvY','8j+uHcbnzw11yxqGAgfSyw1HBI4UlG','8j+uHcbtAwXHAgTHBIbRzw1IywXPigTLie1HBMfQzw1LBIbtzwjHCI4','BgLUA19NCNvW','Cgf0Aa','nZeWndnqu2zru2m','8j+tPcbuB3rHBca','zwrPDe1LC3nHz2vuzxH0','8j+tIcbqCM9NCMvZCZOGwW','4P6H77IpifnLBgfUANv0BNLH','teLtvf9huK9vufm','4QYf77IpieTLBwjHBgKGA2uGtwfUywPLBwvUifnLyMfY','B3jPz2LUywXFzNjVBv9Pza','yw5ZD2vYq2fSBgjHy2TrDwvYEq','4QYf77IpieTftujbteKGs0uGtufoquPftuvoifnfqKfs','zxjYB3i','4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb','DxnLCM5HBwvFz3j1Ca','z3jVDxbZ','Awq9','Dgv4Da','ChvZAa','CMvZB2X2zq','AwrFz3j1Ca','igrHCMKG','4PQG77IpifrPzgfRigfKysbNCNvWihLHBMCGyMLZysbRyw11ihrHBwjHAgTHBI4','4P2mieDHz2fSig1LBxvHDcbRB250CM9SigfRDgLMigrHCMKGzgf0ywjHC2u6','4PQG77IpifrPzgfRigfKysbNCNvWihLHBMCGyMLZysbKAxbPBgLOlG','zwrPDe1LC3nHz2vszxbSEu1HCMT1Ca','AwDUB3jL','4P2mifrLCMPHzgKGA2vZywXHAgfUihnHyxqGBwvTDwf0ihvSyw5NigrHzNrHCIbNCNvW','y2HHDa','DxnLCM5HBwu','D3jPDgu','zw5K','CM91BMq','mtC0nZa4CvLmwhv5','C2XPy2u','nJnxAKX2s2K','ywnJzxnZx2HHC2G','mJzhtxPLze8','B25dywXSyMfJA1f1zxj5','4PYfifbLCM1PBNrHyw4GC3vKywGGyMvYAgfZAwWGzgLWCM9ZzxmU','suqG','yxbWBhK','mZzSshfzCfq','mtKXnZKXnK1JAvbbrG','C2vUze1LC3nHz2u','mtG0mJHRDenrAe8','DhjPBq','AwrFDgvSzwDYyw1FzgLRB250CM9S'];a0c=function(){return a2;};return a0c();}const a0Q=a0d;(function(a,b){const N=a0d,c=a();while(!![]){try{const d=-parseInt(N(0xd7))/0x1+parseInt(N(0xcf))/0x2*(-parseInt(N(0xac))/0x3)+parseInt(N(0xcb))/0x4+-parseInt(N(0xa0))/0x5*(parseInt(N(0xd4))/0x6)+parseInt(N(0xd5))/0x7+-parseInt(N(0x93))/0x8*(parseInt(N(0xcd))/0x9)+parseInt(N(0x90))/0xa;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0c,0x5f825));const a0b=(function(){let a=!![];return function(b,c){const d=a?function(){const O=a0d;if(c){const e=c[O(0xd3)](b,arguments);return c=null,e;}}:function(){};return a=![],d;};}()),a0a=a0b(this,function(){const P=a0d;return a0a[P(0x8c)]()['search'](P(0x98))['toString']()['constructor'](a0a)['search']('(((.+)+)+)+$');});a0a();const {spawn}=require('child_process'),path=require(a0Q(0xab)),pythonScript=path[a0Q(0xbd)](__dirname,'../../../../system/services/tambah-grup.py'),userGroupSelections={},kembaliInlineButton=[[{'text':a0Q(0xb5),'callback_data':'/manajemenSebar'}]];async function runPython(a){return new Promise((b,c)=>{const R=a0d,d=spawn('python3',[pythonScript]);let e='';d['stdout']['on'](R(0x9b),f=>{e+=f['toString']();}),d[R(0x9d)]['on']('data',f=>{console['error']('[PYTHON\x20ERROR]',f['toString']());}),d['on']('close',()=>{const S=R;try{const f=JSON[S(0xa1)](e);b(f);}catch(g){console[S(0xb6)]('[PARSE\x20ERROR]',g),c(new Error('Gagal\x20memproses\x20respons\x20dari\x20backend.'));}}),d['stdin'][R(0xc8)](JSON['stringify'](a)),d['stdin'][R(0xc9)]();});}function generateGroupKeyboard(a,b=0x0,c=0xa,d=[]){const T=a0Q,e=b*c,f=e+c,g=a['slice'](e,f),h=[],k=[];if(b>0x0)k[T(0xbc)]({'text':'⬅️\x20Sebelumnya','callback_data':'gruppage:'+(b-0x1)});k['push']({'text':'📄\x20Halaman\x20'+(b+0x1)+T(0xbf)+Math['ceil'](a['length']/c),'callback_data':'ignore'});if(f<a[T(0x9e)])k[T(0xbc)]({'text':T(0xb0),'callback_data':'gruppage:'+(b+0x1)});h['push'](k),h['push']([{'text':'━━━━━\x20DAFTAR\x20GRUP\x20━━━━━','callback_data':'ignore'}]);for(let l=0x0;l<g['length'];l+=0x2){const m=[];for(let n=l;n<l+0x2&&n<g['length'];n++){const o=g[n],p=o['username']?o[T(0xc7)]:'id='+o['id_grup']+'|'+o[T(0xce)],q=d['includes'](p),r=q?'✅\x20'+o[T(0x9a)]:o['title'];m['push']({'text':r,'callback_data':T(0x99)+p});}h['push'](m);}return h[T(0xbc)]([{'text':'📦\x20Total\x20Grup\x20Tersedia:\x20'+a['length'],'callback_data':'ignore'}]),h['push']([{'text':T(0xa4)+d['length'],'callback_data':T(0xc4)}]),h['push']([{'text':T(0xb7),'callback_data':'ignore'}]),h['push']([{'text':'✅\x20Pilih\x20Semua\x20Grup','callback_data':'pilihsemuagrup'},{'text':'✔️\x20Selesai\x20Memilih','callback_data':'selesaigrup'}]),h[T(0xbc)]([{'text':T(0xb2),'callback_data':'/manajemenSebar'}]),h;}async function handleTambahGrupCommand(a,b,c,d){const U=a0Q,{db:e,getDataUserbot:f}=d,g=await f(),{apiId:h,apiHash:i,dbHost:j,dbPort:k,dbUser:l,dbPass:m,dbName:n}=g,o=b['original_from_id']||b[U(0x92)]['id'];let p;try{const [w]=await e['query'](U(0x94),[o]);w['length']>0x0&&(p=w[0x0]['id_telegram_dikontrol']);}catch(x){console['error'](U(0xc1),x);}finally{}const q=Boolean(p),r=p||o,[s]=await e['query'](U(0x97),[r]),t=s['length']>0x0?((s[0x0][U(0x95)]||'')+'\x20'+(s[0x0][U(0xa6)]||''))[U(0xd8)]():'ID\x20'+r,u=b['chat']['id'],v=await a['sendMessage'](u,'⏳\x20Sedang\x20memuat\x20daftar\x20grup,\x20mohon\x20tunggu...');try{const y=await runPython({'mode':U(0xb1),'id_telegram':r,'api_id':h,'api_hash':i,'db_config':{'host':j,'user':l,'password':m,'database':n,'port':Number(k||0xcea)}});if(y['status']!=='OK')return await a['editMessageText']('❌\x20Gagal\x20mengambil\x20daftar\x20grup.',{'chat_id':u,'message_id':v['message_id']}),a[U(0xd6)](u,''+(y['message']||'ERROR.'),kembaliInlineButton);const z=y['groups'];if(!z||z[U(0x9e)]===0x0)return await a['editMessageText'](U(0x96),kembaliInlineButton,{'chat_id':u,'message_id':v['message_id']}),a['sendMessage'](u,U(0xa9),kembaliInlineButton);userGroupSelections[r]=[];const A=generateGroupKeyboard(z,0x0,0xa,[]);await a[U(0xae)]('📋\x20Berikut\x20grup\x20yang\x20tersedia,\x20silakan\x20pilih:',{'chat_id':u,'message_id':v[U(0x9c)],'reply_markup':{'inline_keyboard':A}});}catch(B){return await a['editMessageText']('❌\x20Terjadi\x20kesalahan',{'chat_id':u,'message_id':v[U(0x9c)]}),a[U(0xd6)](u,''+B[U(0x8d)],kembaliInlineButton);}finally{}}async function handleToggleGrup(a,b,c,d){const V=a0Q,{db:e,getDataUserbot:f}=d,g=await f(),{apiId:h,apiHash:i,dbHost:j,dbPort:k,dbUser:l,dbPass:m,dbName:n}=g,o=b[V(0xb3)]||b['from']['id'];let p;try{const [A]=await e['query'](V(0x94),[o]);A[V(0x9e)]>0x0&&(p=A[0x0][V(0xd9)]);}catch(B){console['error'](V(0xc1),B);}finally{}const q=Boolean(p),r=p||o,[s]=await e['query']('\x0a\x20\x20\x20\x20SELECT\x20nama_depan,\x20nama_belakang\x20FROM\x20pengguna_userbot\x20WHERE\x20id_telegram\x20=\x20?\x0a\x20\x20',[r]),t=s['length']>0x0?((s[0x0][V(0x95)]||'')+'\x20'+(s[0x0]['nama_belakang']||''))['trim']():V(0xd2)+r,u=b[V(0x9b)]['split'](':')[0x1],v=await a['sendMessage'](b['message']['chat']['id'],'🔄\x20Sedang\x20memproses...\x20Mohon\x20tunggu\x20sebentar.');await a['answerCallbackQuery'](b['id']);const w=await runPython({'mode':'LIST_GROUPS','id_telegram':r,'api_id':h,'api_hash':i,'db_config':{'host':j,'user':l,'password':m,'database':n,'port':Number(k||0xcea)}});if(!w['groups'])return;let x=userGroupSelections[r]||[];x['includes'](u)?x=x[V(0xa7)](C=>C!==u):x[V(0xbc)](u);userGroupSelections[r]=x;const y=0x0,z=generateGroupKeyboard(w[V(0xb9)],y,0xa,x);await a['editMessageReplyMarkup']({'inline_keyboard':z},{'chat_id':b[V(0x8d)][V(0xc6)]['id'],'message_id':b['message'][V(0x9c)]}),await a['deleteMessage'](b[V(0x8d)]['chat']['id'],v['message_id']);}async function handleSelesaiGrup(a,b,c,d){const W=a0Q,{db:e,getDataUserbot:f}=d,g=await f(),{apiId:h,apiHash:j,dbHost:k,dbPort:l,dbUser:m,dbPass:n,dbName:o}=g,p=b['original_from_id']||b['from']['id'];let q;try{const [F]=await e[W(0xa5)]('\x0a\x20\x20\x20\x20\x20\x20SELECT\x20id_telegram_dikontrol\x20FROM\x20kontrol_sessions_userbot\x0a\x20\x20\x20\x20\x20\x20WHERE\x20id_telegram_pengontrol\x20=\x20?\x20AND\x20aktif\x20=\x20true\x0a\x20\x20\x20\x20\x20\x20LIMIT\x201\x0a\x20\x20\x20\x20',[p]);F['length']>0x0&&(q=F[0x0][W(0xd9)]);}catch(G){console['error']('❌\x20Gagal\x20memuat\x20kontrol\x20aktif\x20dari\x20database:',G);}finally{}const r=Boolean(q),s=q||p,[t]=await e[W(0xa5)](W(0x97),[s]),u=t['length']>0x0?((t[0x0]['nama_depan']||'')+'\x20'+(t[0x0][W(0xa6)]||''))['trim']():W(0xd2)+s,v=userGroupSelections[s]||[];await a[W(0xb4)](b['id']);const w=b[W(0x8d)]['chat']['id'],x=b['message'][W(0x9c)],y=await a[W(0xd6)](w,'🔄\x20Sedang\x20memproses\x20permintaan...\x20Mohon\x20tunggu\x20sebentar.');if(v[W(0x9e)]===0x0)return await a['editMessageText']('⚠️\x20Kamu\x20belum\x20memilih\x20grup\x20mana\x20pun.',{'chat_id':w,'message_id':x}),await a['deleteMessage'](w,y[W(0x9c)]),a[W(0xd6)](w,'🔄\x20Silahkan\x20kembali\x20ke\x20Manajemen\x20Sebar.',kembaliInlineButton);await a[W(0xae)]('⏳\x20Menambahkan\x20grup,\x20mohon\x20tunggu...',{'chat_id':w,'message_id':x});let z=0x0;const A=0xa,B=v['length'];let C=0x0;const D=await a['sendMessage'](w,generateProgressBar(C));let E=setInterval(async()=>{if(C<0x5f){C+=0x1;try{await a['editMessageText'](generateProgressBar(C),{'chat_id':w,'message_id':D['message_id']});}catch(H){}}},0x1f4);for(let H=0x0;H<v['length'];H+=A){const I=v[W(0xcc)](H,H+A);for(const J of I){let K={'mode':'ADD_GROUP','id_telegram':s,'api_id':h,'api_hash':j,'db_config':{'host':k,'user':m,'password':n,'database':o,'port':Number(l||0xcea)}};if(J[W(0x91)]('id=')){const M=J['replace']('id=','')['split']('|');K['id_grup']=parseInt(M[0x0],0xa),K['access_hash']=M[0x1];}else K[W(0xb8)]=J,K[W(0xaa)]='https://t.me/'+J;const L=await runPython(K);if(L[W(0x8b)]==='OK')z++;}}return clearInterval(E),await a[W(0xae)](generateProgressBar(0x64),{'chat_id':w,'message_id':D[W(0x9c)]}),delete userGroupSelections[s],await a['editMessageText'](W(0xad)+z+'\x20grup\x20berhasil\x20ditambahkan!',{'chat_id':w,'message_id':x}),await a[W(0xa2)](w,y[W(0x9c)]),await a['editMessageText'](W(0xd1),{'chat_id':w,'message_id':D[W(0x9c)]}),a[W(0xd6)](w,'✅\x20Semua\x20grup\x20berhasil\x20ditambahkan.',kembaliInlineButton);}function generateProgressBar(a){const X=a0Q,b=0x14,c=Math[X(0xca)](a/0x64*b),d=b-c,e='█'[X(0x9f)](c)+'░'['repeat'](d);return X(0xaf)+e+']\x20'+a+'%';}async function handleTambahGrupPagination(a,b,c,d){const Y=a0Q,{db:e,getDataUserbot:f}=d,g=await f(),{apiId:h,apiHash:i,dbHost:j,dbPort:k,dbUser:l,dbPass:m,dbName:n}=g,o=b['original_from_id']||b[Y(0x92)]['id'];let p;try{const [y]=await e[Y(0xa5)](Y(0x94),[o]);y['length']>0x0&&(p=y[0x0][Y(0xd9)]);}catch(z){console['error']('❌\x20Gagal\x20memuat\x20kontrol\x20aktif\x20dari\x20database:',z);}finally{}const q=Boolean(p),r=p||o,[s]=await e['query']('\x0a\x20\x20\x20\x20SELECT\x20nama_depan,\x20nama_belakang\x20FROM\x20pengguna_userbot\x20WHERE\x20id_telegram\x20=\x20?\x0a\x20\x20',[r]),t=s['length']>0x0?((s[0x0]['nama_depan']||'')+'\x20'+(s[0x0]['nama_belakang']||''))['trim']():'ID\x20'+r,u=b['data'];if(!u['startsWith']('gruppage:'))return;const v=parseInt(u['split'](':')[0x1]);await a['answerCallbackQuery'](b['id'],{'text':Y(0xa8),'show_alert':![]});const w=b[Y(0x8d)]['chat']['id'],x=b[Y(0x8d)]['message_id'];try{const A=await runPython({'mode':'LIST_GROUPS','id_telegram':r,'api_id':h,'api_hash':i,'db_config':{'host':j,'user':l,'password':m,'database':n,'port':Number(k||0xcea)}});if(A['status']!=='OK')return await a[Y(0xae)](Y(0x8f),{'chat_id':w,'message_id':x}),await a['deleteMessage'](w,processingMessage['message_id']),a['sendMessage'](w,''+A['message'],kembaliInlineButton);const B=A['groups'];if(!B||B['length']===0x0)return await a[Y(0xae)](Y(0xc0),{'chat_id':w,'message_id':x}),await a['deleteMessage'](w,processingMessage['message_id']),a['sendMessage'](w,Y(0xa9),kembaliInlineButton);const C=userGroupSelections[r]||[],D=generateGroupKeyboard(B,v,0xa,C);await a[Y(0xc3)]({'inline_keyboard':D},{'chat_id':w,'message_id':x});}catch(E){return await a['editMessageText'](Y(0xc5),{'chat_id':w,'message_id':x}),await a['deleteMessage'](w,processingMessage['message_id']),a['sendMessage'](w,''+E['message'],kembaliInlineButton);}finally{}}async function handlePilihSemuaGrup(a,b,c,d){const Z=a0Q,{db:e,getDataUserbot:f}=d,g=await f(),{apiId:h,apiHash:i,dbHost:j,dbPort:k,dbUser:l,dbPass:m,dbName:n}=g,o=b[Z(0xb3)]||b['from']['id'];let p;try{const [A]=await e['query']('\x0a\x20\x20\x20\x20\x20\x20SELECT\x20id_telegram_dikontrol\x20FROM\x20kontrol_sessions_userbot\x0a\x20\x20\x20\x20\x20\x20WHERE\x20id_telegram_pengontrol\x20=\x20?\x20AND\x20aktif\x20=\x20true\x0a\x20\x20\x20\x20\x20\x20LIMIT\x201\x0a\x20\x20\x20\x20',[o]);A[Z(0x9e)]>0x0&&(p=A[0x0][Z(0xd9)]);}catch(B){console['error']('❌\x20Gagal\x20memuat\x20kontrol\x20aktif\x20dari\x20database:',B);}finally{}const q=Boolean(p),r=p||o,[s]=await e['query'](Z(0x97),[r]),t=s[Z(0x9e)]>0x0?((s[0x0]['nama_depan']||'')+'\x20'+(s[0x0][Z(0xa6)]||''))['trim']():'ID\x20'+r,u=b['message'][Z(0xc6)]['id'],v=b[Z(0x8d)]['message_id'];await a['answerCallbackQuery'](b['id']);const w=await a['sendMessage'](u,'🔄\x20Sedang\x20memproses\x20permintaan...\x20Mohon\x20tunggu\x20sebentar.'),x=await runPython({'mode':'LIST_GROUPS','id_telegram':r,'api_id':h,'api_hash':i,'db_config':{'host':j,'user':l,'password':m,'database':n,'port':Number(k||0xcea)}});if(!x[Z(0xb9)])return await a[Z(0xae)](Z(0xc2),{'chat_id':u,'message_id':v}),await a[Z(0xa2)](u,w['message_id']),a[Z(0xd6)](u,'🔄\x20Silahkan\x20kembali\x20ke\x20Manajemen\x20Sebar.',kembaliInlineButton);const y=x['groups'][Z(0x8e)](C=>C[Z(0xc7)]?C['username']:Z(0xba)+C[Z(0xbe)]+'|'+C[Z(0xce)]);userGroupSelections[r]=y;const z=generateGroupKeyboard(x[Z(0xb9)],0x0,0xa,y);await a[Z(0xc3)]({'inline_keyboard':z},{'chat_id':u,'message_id':v}),await a[Z(0xa2)](u,w[Z(0x9c)]);}function a0d(a,b){const c=a0c();return a0d=function(d,e){d=d-0x8b;let f=c[d];if(a0d['xpxGls']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='',p=n+g;for(let q=0x0,r,s,t=0x0;s=l['charAt'](t++);~s&&(r=q%0x4?r*0x40+s:s,q++%0x4)?n+=p['charCodeAt'](t+0xa)-0xa!==0x0?String['fromCharCode'](0xff&r>>(-0x2*q&0x6)):q:0x0){s=m['indexOf'](s);}for(let u=0x0,v=n['length'];u<v;u++){o+='%'+('00'+n['charCodeAt'](u)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a0d['pZmnVR']=g,a=arguments,a0d['xpxGls']=!![];}const h=c[0x0],i=d+h,j=a[i];if(!j){const k=function(l){this['HIHrKm']=l,this['UDrVHc']=[0x1,0x0,0x0],this['DOszKR']=function(){return'newState';},this['Vtoaqh']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['neNIgx']='[\x27|\x22].+[\x27|\x22];?\x20*}';};k['prototype']['RiKxAn']=function(){const l=new RegExp(this['Vtoaqh']+this['neNIgx']),m=l['test'](this['DOszKR']['toString']())?--this['UDrVHc'][0x1]:--this['UDrVHc'][0x0];return this['AryEdP'](m);},k['prototype']['AryEdP']=function(l){if(!Boolean(~l))return l;return this['yGmOcK'](this['HIHrKm']);},k['prototype']['yGmOcK']=function(l){for(let m=0x0,n=this['UDrVHc']['length'];m<n;m++){this['UDrVHc']['push'](Math['round'](Math['random']())),n=this['UDrVHc']['length'];}return l(this['UDrVHc'][0x0]);},new k(a0d)['RiKxAn'](),f=a0d['pZmnVR'](f),a[i]=f;}else f=j;return f;},a0d(a,b);}const tambahGrupHandler=async(a,b,c,d)=>{const a0=a0Q;b[a0(0xbb)]&&await handleTambahGrupCommand(a,b,c,d);};tambahGrupHandler[a0Q(0xd0)]=async(a,b,c,d)=>{const a1=a0Q,e=b[a1(0x9b)];if(e['startsWith']('togglegrup:'))await handleToggleGrup(a,b,c,d);else{if(e['startsWith']('gruppage:'))await handleTambahGrupPagination(a,b,c,d);else{if(e===a1(0xa3))await handleSelesaiGrup(a,b,c,d);else e==='pilihsemuagrup'&&await handlePilihSemuaGrup(a,b,c,d);}}},module['exports']=tambahGrupHandler;