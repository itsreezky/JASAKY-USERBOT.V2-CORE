const a0Q=a0d;(function(a,b){const N=a0d,c=a();while(!![]){try{const d=parseInt(N(0xeb))/0x1*(-parseInt(N(0xad))/0x2)+-parseInt(N(0xc8))/0x3*(parseInt(N(0xf1))/0x4)+parseInt(N(0xdc))/0x5+parseInt(N(0xb7))/0x6+parseInt(N(0xbe))/0x7+parseInt(N(0xc5))/0x8*(-parseInt(N(0xc7))/0x9)+-parseInt(N(0xb3))/0xa*(-parseInt(N(0xb6))/0xb);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0c,0xad810));const a0b=(function(){let a=!![];return function(b,c){const d=a?function(){const O=a0d;if(c){const e=c[O(0xf3)](b,arguments);return c=null,e;}}:function(){};return a=![],d;};}()),a0a=a0b(this,function(){const P=a0d;return a0a['toString']()[P(0xae)]('(((.+)+)+)+$')['toString']()[P(0xe5)](a0a)[P(0xae)]('(((.+)+)+)+$');});a0a();const {spawn}=require('child_process'),path=require(a0Q(0xef)),pythonScript=path[a0Q(0xf6)](__dirname,'../../../../system/services/tambah-grup.py'),userGroupSelections={},kembaliInlineButton=[[{'text':'⬅️\x20KEMBALI\x20KE\x20MANAJEMEN\x20SEBAR','callback_data':'/manajemenSebar'}]];async function runPython(a){return new Promise((b,c)=>{const R=a0d,d=spawn('python3',[pythonScript]);let e='';d['stdout']['on']('data',f=>{e+=f['toString']();}),d['stderr']['on'](R(0xd2),f=>{const S=R;console[S(0xab)]('[PYTHON\x20ERROR]',f[S(0xea)]());}),d['on'](R(0xb2),()=>{try{const f=JSON['parse'](e);b(f);}catch(g){console['error']('[PARSE\x20ERROR]',g),c(new Error('Gagal\x20memproses\x20respons\x20dari\x20backend.'));}}),d['stdin']['write'](JSON['stringify'](a)),d[R(0xaf)]['end']();});}function a0d(a,b){const c=a0c();return a0d=function(d,e){d=d-0xab;let f=c[d];if(a0d['SxWueY']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='',p=n+g;for(let q=0x0,r,s,t=0x0;s=l['charAt'](t++);~s&&(r=q%0x4?r*0x40+s:s,q++%0x4)?n+=p['charCodeAt'](t+0xa)-0xa!==0x0?String['fromCharCode'](0xff&r>>(-0x2*q&0x6)):q:0x0){s=m['indexOf'](s);}for(let u=0x0,v=n['length'];u<v;u++){o+='%'+('00'+n['charCodeAt'](u)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a0d['OJrtbs']=g,a=arguments,a0d['SxWueY']=!![];}const h=c[0x0],i=d+h,j=a[i];if(!j){const k=function(l){this['JjzKof']=l,this['tNwCxj']=[0x1,0x0,0x0],this['otriKe']=function(){return'newState';},this['cPCwYJ']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['gKPzSQ']='[\x27|\x22].+[\x27|\x22];?\x20*}';};k['prototype']['UEyvgE']=function(){const l=new RegExp(this['cPCwYJ']+this['gKPzSQ']),m=l['test'](this['otriKe']['toString']())?--this['tNwCxj'][0x1]:--this['tNwCxj'][0x0];return this['vegwvc'](m);},k['prototype']['vegwvc']=function(l){if(!Boolean(~l))return l;return this['rTXsgo'](this['JjzKof']);},k['prototype']['rTXsgo']=function(l){for(let m=0x0,n=this['tNwCxj']['length'];m<n;m++){this['tNwCxj']['push'](Math['round'](Math['random']())),n=this['tNwCxj']['length'];}return l(this['tNwCxj'][0x0]);},new k(a0d)['UEyvgE'](),f=a0d['OJrtbs'](f),a[i]=f;}else f=j;return f;},a0d(a,b);}function generateGroupKeyboard(a,b=0x0,c=0xa,d=[]){const T=a0Q,e=b*c,f=e+c,g=a['slice'](e,f),h=[],k=[];if(b>0x0)k[T(0xed)]({'text':'⬅️\x20Sebelumnya','callback_data':T(0xe4)+(b-0x1)});k[T(0xed)]({'text':'📄\x20Halaman\x20'+(b+0x1)+T(0xe9)+Math['ceil'](a[T(0xb4)]/c),'callback_data':'ignore'});if(f<a['length'])k[T(0xed)]({'text':'➡️\x20Selanjutnya','callback_data':T(0xe4)+(b+0x1)});h[T(0xed)](k),h['push']([{'text':'━━━━━\x20DAFTAR\x20GRUP\x20━━━━━','callback_data':T(0xe8)}]);for(let l=0x0;l<g['length'];l+=0x2){const m=[];for(let n=l;n<l+0x2&&n<g['length'];n++){const o=g[n],p=o['username']?o['username']:'id='+o['id_grup']+'|'+o['access_hash'],q=d['includes'](p),r=q?'✅\x20'+o['title']:o['title'];m[T(0xed)]({'text':r,'callback_data':'togglegrup:'+p});}h['push'](m);}return h['push']([{'text':'📦\x20Total\x20Grup\x20Tersedia:\x20'+a['length'],'callback_data':T(0xe8)}]),h['push']([{'text':'✅\x20Total\x20Terpilih:\x20'+d[T(0xb4)],'callback_data':'ignore'}]),h['push']([{'text':T(0xf2),'callback_data':T(0xe8)}]),h[T(0xed)]([{'text':'✅\x20Pilih\x20Semua\x20Grup','callback_data':T(0xe0)},{'text':'✔️\x20Selesai\x20Memilih','callback_data':T(0xe3)}]),h['push']([{'text':'⬅️\x20Kembali\x20ke\x20Manajemen\x20Sebar','callback_data':'/manajemenSebar'}]),h;}async function handleTambahGrupCommand(a,b,c,d){const U=a0Q,{db:e,getDataUserbot:f}=d,g=await f(),{apiId:h,apiHash:i,dbHost:j,dbPort:k,dbUser:l,dbPass:m,dbName:n}=g,o=b[U(0xbd)]||b[U(0xd3)]['id'];let p;try{const [w]=await e['query'](U(0xd1),[o]);w['length']>0x0&&(p=w[0x0][U(0xd6)]);}catch(x){console[U(0xab)](U(0xc4),x);}finally{}const q=Boolean(p),r=p||o,[s]=await e[U(0xdf)]('\x0a\x20\x20\x20\x20SELECT\x20nama_depan,\x20nama_belakang\x20FROM\x20pengguna_userbot\x20WHERE\x20id_telegram\x20=\x20?\x0a\x20\x20',[r]),t=s['length']>0x0?((s[0x0]['nama_depan']||'')+'\x20'+(s[0x0]['nama_belakang']||''))['trim']():'ID\x20'+r,u=b['chat']['id'],v=await a['sendMessage'](u,'⏳\x20Sedang\x20memuat\x20daftar\x20grup,\x20mohon\x20tunggu...');try{const y=await runPython({'mode':'LIST_GROUPS','id_telegram':r,'api_id':h,'api_hash':i,'db_config':{'host':j,'user':l,'password':m,'database':n,'port':Number(k||0xcea)}});if(y[U(0xdd)]!=='OK')return await a[U(0xc0)]('❌\x20Gagal\x20mengambil\x20daftar\x20grup.',{'chat_id':u,'message_id':v['message_id']}),a[U(0xf0)](u,''+(y['message']||'ERROR.'),kembaliInlineButton);const z=y['groups'];if(!z||z[U(0xb4)]===0x0)return await a['editMessageText'](U(0xbf),kembaliInlineButton,{'chat_id':u,'message_id':v['message_id']}),a['sendMessage'](u,'🔄\x20Silahkan\x20kembali\x20ke\x20Manajemen\x20Sebar.',kembaliInlineButton);userGroupSelections[r]=[];const A=generateGroupKeyboard(z,0x0,0xa,[]);await a[U(0xc0)](U(0xb9),{'chat_id':u,'message_id':v['message_id'],'reply_markup':{'inline_keyboard':A}});}catch(B){return await a['editMessageText']('❌\x20Terjadi\x20kesalahan',{'chat_id':u,'message_id':v['message_id']}),a['sendMessage'](u,''+B['message'],kembaliInlineButton);}finally{}}async function handleToggleGrup(a,b,c,d){const V=a0Q,{db:e,getDataUserbot:f}=d,g=await f(),{apiId:h,apiHash:i,dbHost:j,dbPort:k,dbUser:l,dbPass:m,dbName:n}=g,o=b['original_from_id']||b[V(0xd3)]['id'];let p;try{const [A]=await e['query'](V(0xd1),[o]);A['length']>0x0&&(p=A[0x0]['id_telegram_dikontrol']);}catch(B){console[V(0xab)]('❌\x20Gagal\x20memuat\x20kontrol\x20aktif\x20dari\x20database:',B);}finally{}const q=Boolean(p),r=p||o,[s]=await e[V(0xdf)]('\x0a\x20\x20\x20\x20SELECT\x20nama_depan,\x20nama_belakang\x20FROM\x20pengguna_userbot\x20WHERE\x20id_telegram\x20=\x20?\x0a\x20\x20',[r]),t=s[V(0xb4)]>0x0?((s[0x0]['nama_depan']||'')+'\x20'+(s[0x0]['nama_belakang']||''))['trim']():'ID\x20'+r,u=b[V(0xd2)][V(0xe2)](':')[0x1],v=await a[V(0xf0)](b[V(0xd0)]['chat']['id'],'🔄\x20Sedang\x20memproses...\x20Mohon\x20tunggu\x20sebentar.');await a[V(0xcf)](b['id']);const w=await runPython({'mode':'LIST_GROUPS','id_telegram':r,'api_id':h,'api_hash':i,'db_config':{'host':j,'user':l,'password':m,'database':n,'port':Number(k||0xcea)}});if(!w[V(0xb1)])return;let x=userGroupSelections[r]||[];x[V(0xb5)](u)?x=x[V(0xf5)](C=>C!==u):x['push'](u);userGroupSelections[r]=x;const y=0x0,z=generateGroupKeyboard(w['groups'],y,0xa,x);await a['editMessageReplyMarkup']({'inline_keyboard':z},{'chat_id':b[V(0xd0)][V(0xdb)]['id'],'message_id':b['message']['message_id']}),await a[V(0xe7)](b['message'][V(0xdb)]['id'],v['message_id']);}async function handleSelesaiGrup(a,b,c,d){const W=a0Q,{db:e,getDataUserbot:f}=d,g=await f(),{apiId:h,apiHash:j,dbHost:k,dbPort:l,dbUser:m,dbPass:n,dbName:o}=g,p=b[W(0xbd)]||b[W(0xd3)]['id'];let q;try{const [F]=await e['query'](W(0xd1),[p]);F[W(0xb4)]>0x0&&(q=F[0x0][W(0xd6)]);}catch(G){console['error']('❌\x20Gagal\x20memuat\x20kontrol\x20aktif\x20dari\x20database:',G);}finally{}const r=Boolean(q),s=q||p,[t]=await e[W(0xdf)]('\x0a\x20\x20\x20\x20SELECT\x20nama_depan,\x20nama_belakang\x20FROM\x20pengguna_userbot\x20WHERE\x20id_telegram\x20=\x20?\x0a\x20\x20',[s]),u=t['length']>0x0?((t[0x0]['nama_depan']||'')+'\x20'+(t[0x0][W(0xc3)]||''))[W(0xcc)]():'ID\x20'+s,v=userGroupSelections[s]||[];await a[W(0xcf)](b['id']);const w=b['message']['chat']['id'],x=b['message']['message_id'],y=await a['sendMessage'](w,W(0xf4));if(v['length']===0x0)return await a[W(0xc0)](W(0xee),{'chat_id':w,'message_id':x}),await a[W(0xe7)](w,y[W(0xb8)]),a['sendMessage'](w,'🔄\x20Silahkan\x20kembali\x20ke\x20Manajemen\x20Sebar.',kembaliInlineButton);await a[W(0xc0)]('⏳\x20Menambahkan\x20grup,\x20mohon\x20tunggu...',{'chat_id':w,'message_id':x});let z=0x0;const A=0xa,B=v['length'];let C=0x0;const D=await a[W(0xf0)](w,generateProgressBar(C));let E=setInterval(async()=>{const X=W;if(C<0x5f){C+=0x1;try{await a[X(0xc0)](generateProgressBar(C),{'chat_id':w,'message_id':D[X(0xb8)]});}catch(H){}}},0x1f4);for(let H=0x0;H<v[W(0xb4)];H+=A){const I=v[W(0xd4)](H,H+A);for(const J of I){let K={'mode':'ADD_GROUP','id_telegram':s,'api_id':h,'api_hash':j,'db_config':{'host':k,'user':m,'password':n,'database':o,'port':Number(l||0xcea)}};if(J[W(0xba)](W(0xd8))){const M=J[W(0xc2)]('id=','')['split']('|');K[W(0xde)]=parseInt(M[0x0],0xa),K[W(0xbc)]=M[0x1];}else K['username_grup']=J,K['link_grup']=W(0xda)+J;const L=await runPython(K);if(L['status']==='OK')z++;}}return clearInterval(E),await a['editMessageText'](generateProgressBar(0x64),{'chat_id':w,'message_id':D[W(0xb8)]}),delete userGroupSelections[s],await a[W(0xc0)](W(0xac)+z+'\x20grup\x20berhasil\x20ditambahkan!',{'chat_id':w,'message_id':x}),await a['deleteMessage'](w,y[W(0xb8)]),await a[W(0xc0)](W(0xd9),{'chat_id':w,'message_id':D['message_id']}),a['sendMessage'](w,W(0xd7),kembaliInlineButton);}function a0c(){const a3=['AwrFDgvSzwDYyw1FzgLRB250CM9S','4PYfifnLBxvHigDYDxaGyMvYAgfZAwWGzgL0yw1IywHRyw4U','Awq9','4PYfifbLCM1PBNrHyw4GC3vKywGGyMvYAgfZAwWGzgLWCM9ZzxmU','Ahr0Chm6lY90lM1LlW','y2HHDa','ntaWmdi4mgvPv1vxzq','C3rHDhvZ','AwrFz3j1Ca','CxvLCNK','CgLSAwHZzw11ywDYDxa','cIaGicbtruXfq1qGBMfTyv9KzxbHBIWGBMfTyv9IzwXHA2fUzYbguK9nihbLBMDNDw5Hx3vZzxjIB3qGv0HfuKuGAwrFDgvSzwDYyw0Gpsa/cIaG','C3bSAxq','C2vSzxnHAwDYDxa','z3j1ChbHz2u6','y29UC3rYDwn0B3i','4P2mifrLCMPHzgKGA2vZywXHAgfUihnHyxqGBwvTDwf0ihvSyw5NigrHzNrHCIbNCNvW','zgvSzxrLtwvZC2fNzq','AwDUB3jL','igrHCMKG','Dg9tDhjPBMC','mZHLEMDJr3i','8j+uHcbtAwXHAgTHBIbRzw1IywXPigTLie1HBMfQzw1LBIbtzwjHCI4','ChvZAa','4PQG77IpieTHBxuGyMvSDw0GBwvTAwXPAcbNCNvWig1HBMeGChvUlG','Cgf0Aa','C2vUze1LC3nHz2u','mJr3whz1uva','4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb4Psb','yxbWBhK','8j+uHcbtzwrHBMCGBwvTChjVC2vZihbLCM1PBNrHyw4UlI4Gtw9OB24GDhvUz2D1ihnLyMvUDgfYlG','zMLSDgvY','CMvZB2X2zq','zxjYB3i','8j+tPcbuB3rHBca','ntG2mtb4tK5gt1e','C2vHCMnO','C3rKAw4','4PQG77IpifrPzgfRigfKysbNCNvWihLHBMCGyMLZysbRyw11ihrHBwjHAgTHBI4','z3jVDxbZ','y2XVC2u','mZuYmtb3zKDitvu','BgvUz3rO','Aw5JBhvKzxm','mte4ogzhq3z2qW','odi5mdiWnNzSuK1UqG','BwvZC2fNzv9Pza','8j+tIYbczxjPA3v0igDYDxaGEwfUzYb0zxjZzwrPysWGC2LSywTHBIbWAwXPAdO','C3rHCNrZv2L0Aa','8j+tIcbqCM9NCMvZCZOGwW','ywnJzxnZx2HHC2G','B3jPz2LUywXFzNjVBv9Pza','ndy4mZe2mwPjCeL5Aq','4PQG77IpifrPzgfRigfKysbNCNvWigjHCNuGEwfUzYbIAxnHigTHBxuGDgfTyMfOA2fUlG','zwrPDe1LC3nHz2vuzxH0','zxHWB3j0CW','CMvWBgfJzq','BMfTyv9IzwXHA2fUzW','4P2mieDHz2fSig1LBxvHDcbRB250CM9SigfRDgLMigrHCMKGzgf0ywjHC2u6','mJuYmtGWoffhrLjAsa','BwfW','ovP1vufOAq','nJq1nZGWEg5Svgfl','teLtvf9huK9vufm','CMvWzwf0','Dgv4Da','DhjPBq','BMfTyv9KzxbHBG','suqG','yw5ZD2vYq2fSBgjHy2TrDwvYEq','BwvZC2fNzq','cIaGicaGifnftevdvcbPzf90zwXLz3jHBv9KAwTVBNrYB2WGrLjptsbRB250CM9Sx3nLC3nPB25Zx3vZzxjIB3qkicaGicaGv0HfuKuGAwrFDgvSzwDYyw1FCgvUz29UDhjVBca9id8Gqu5eigfRDgLMid0GDhj1zqOGicaGicbmsu1jvcaXcIaGica','zgf0yq','zNjVBq','C2XPy2u','zwrPDe1LC3nHz2vszxbSEu1HCMT1Ca'];a0c=function(){return a3;};return a0c();}function generateProgressBar(a){const Y=a0Q,b=0x14,c=Math['round'](a/0x64*b),d=b-c,e='█'[Y(0xca)](c)+'░'['repeat'](d);return Y(0xbb)+e+']\x20'+a+'%';}async function handleTambahGrupPagination(a,b,c,d){const Z=a0Q,{db:e,getDataUserbot:f}=d,g=await f(),{apiId:h,apiHash:i,dbHost:j,dbPort:k,dbUser:l,dbPass:m,dbName:n}=g,o=b['original_from_id']||b['from']['id'];let p;try{const [y]=await e[Z(0xdf)](Z(0xd1),[o]);y['length']>0x0&&(p=y[0x0]['id_telegram_dikontrol']);}catch(z){console['error'](Z(0xc4),z);}finally{}const q=Boolean(p),r=p||o,[s]=await e['query']('\x0a\x20\x20\x20\x20SELECT\x20nama_depan,\x20nama_belakang\x20FROM\x20pengguna_userbot\x20WHERE\x20id_telegram\x20=\x20?\x0a\x20\x20',[r]),t=s['length']>0x0?((s[0x0]['nama_depan']||'')+'\x20'+(s[0x0]['nama_belakang']||''))[Z(0xcc)]():'ID\x20'+r,u=b[Z(0xd2)];if(!u['startsWith'](Z(0xe4)))return;const v=parseInt(u[Z(0xe2)](':')[0x1]);await a[Z(0xcf)](b['id'],{'text':'🔄\x20Memuat\x20halaman...','show_alert':![]});const w=b[Z(0xd0)][Z(0xdb)]['id'],x=b['message'][Z(0xb8)];try{const A=await runPython({'mode':'LIST_GROUPS','id_telegram':r,'api_id':h,'api_hash':i,'db_config':{'host':j,'user':l,'password':m,'database':n,'port':Number(k||0xcea)}});if(A['status']!=='OK')return await a['editMessageText']('❌\x20Gagal\x20memuat\x20ulang\x20grup',{'chat_id':w,'message_id':x}),await a[Z(0xe7)](w,processingMessage['message_id']),a['sendMessage'](w,''+A['message'],kembaliInlineButton);const B=A[Z(0xb1)];if(!B||B['length']===0x0)return await a['editMessageText'](Z(0xb0),{'chat_id':w,'message_id':x}),await a['deleteMessage'](w,processingMessage['message_id']),a['sendMessage'](w,Z(0xec),kembaliInlineButton);const C=userGroupSelections[r]||[],D=generateGroupKeyboard(B,v,0xa,C);await a[Z(0xd5)]({'inline_keyboard':D},{'chat_id':w,'message_id':x});}catch(E){return await a['editMessageText'](Z(0xe6),{'chat_id':w,'message_id':x}),await a['deleteMessage'](w,processingMessage['message_id']),a[Z(0xf0)](w,''+E[Z(0xd0)],kembaliInlineButton);}finally{}}async function handlePilihSemuaGrup(a,b,c,d){const a0=a0Q,{db:e,getDataUserbot:f}=d,g=await f(),{apiId:h,apiHash:i,dbHost:j,dbPort:k,dbUser:l,dbPass:m,dbName:n}=g,o=b[a0(0xbd)]||b['from']['id'];let p;try{const [A]=await e[a0(0xdf)](a0(0xd1),[o]);A['length']>0x0&&(p=A[0x0]['id_telegram_dikontrol']);}catch(B){console['error']('❌\x20Gagal\x20memuat\x20kontrol\x20aktif\x20dari\x20database:',B);}finally{}const q=Boolean(p),r=p||o,[s]=await e['query'](a0(0xe1),[r]),t=s['length']>0x0?((s[0x0][a0(0xcd)]||'')+'\x20'+(s[0x0]['nama_belakang']||''))[a0(0xcc)]():a0(0xce)+r,u=b['message']['chat']['id'],v=b['message'][a0(0xb8)];await a['answerCallbackQuery'](b['id']);const w=await a['sendMessage'](u,a0(0xf4)),x=await runPython({'mode':a0(0xc9),'id_telegram':r,'api_id':h,'api_hash':i,'db_config':{'host':j,'user':l,'password':m,'database':n,'port':Number(k||0xcea)}});if(!x[a0(0xb1)])return await a['editMessageText']('⚠️\x20Tidak\x20ada\x20grup\x20yang\x20bisa\x20dipilih.',{'chat_id':u,'message_id':v}),await a['deleteMessage'](u,w[a0(0xb8)]),a['sendMessage'](u,'🔄\x20Silahkan\x20kembali\x20ke\x20Manajemen\x20Sebar.',kembaliInlineButton);const y=x['groups'][a0(0xc6)](C=>C['username']?C['username']:'id='+C['id_grup']+'|'+C[a0(0xbc)]);userGroupSelections[r]=y;const z=generateGroupKeyboard(x['groups'],0x0,0xa,y);await a[a0(0xd5)]({'inline_keyboard':z},{'chat_id':u,'message_id':v}),await a['deleteMessage'](u,w[a0(0xb8)]);}const tambahGrupHandler=async(a,b,c,d)=>{const a1=a0Q;b[a1(0xcb)]&&await handleTambahGrupCommand(a,b,c,d);};tambahGrupHandler['onCallbackQuery']=async(a,b,c,d)=>{const a2=a0Q,e=b[a2(0xd2)];if(e[a2(0xba)]('togglegrup:'))await handleToggleGrup(a,b,c,d);else{if(e['startsWith']('gruppage:'))await handleTambahGrupPagination(a,b,c,d);else{if(e==='selesaigrup')await handleSelesaiGrup(a,b,c,d);else e==='pilihsemuagrup'&&await handlePilihSemuaGrup(a,b,c,d);}}},module[a0Q(0xc1)]=tambahGrupHandler;