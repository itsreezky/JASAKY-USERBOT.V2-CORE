function a0d(a,b){const c=a0c();return a0d=function(d,e){d=d-0x129;let f=c[d];if(a0d['cjNzWG']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='',p=n+g;for(let q=0x0,r,s,t=0x0;s=l['charAt'](t++);~s&&(r=q%0x4?r*0x40+s:s,q++%0x4)?n+=p['charCodeAt'](t+0xa)-0xa!==0x0?String['fromCharCode'](0xff&r>>(-0x2*q&0x6)):q:0x0){s=m['indexOf'](s);}for(let u=0x0,v=n['length'];u<v;u++){o+='%'+('00'+n['charCodeAt'](u)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a0d['SdkTUX']=g,a=arguments,a0d['cjNzWG']=!![];}const h=c[0x0],i=d+h,j=a[i];if(!j){const k=function(l){this['zhRvQr']=l,this['eXbjJp']=[0x1,0x0,0x0],this['EwYJTv']=function(){return'newState';},this['AZsuDo']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['tIdTfW']='[\x27|\x22].+[\x27|\x22];?\x20*}';};k['prototype']['BqjPCw']=function(){const l=new RegExp(this['AZsuDo']+this['tIdTfW']),m=l['test'](this['EwYJTv']['toString']())?--this['eXbjJp'][0x1]:--this['eXbjJp'][0x0];return this['JKhuKR'](m);},k['prototype']['JKhuKR']=function(l){if(!Boolean(~l))return l;return this['svOfld'](this['zhRvQr']);},k['prototype']['svOfld']=function(l){for(let m=0x0,n=this['eXbjJp']['length'];m<n;m++){this['eXbjJp']['push'](Math['round'](Math['random']())),n=this['eXbjJp']['length'];}return l(this['eXbjJp'][0x0]);},new k(a0d)['BqjPCw'](),f=a0d['SdkTUX'](f),a[i]=f;}else f=j;return f;},a0d(a,b);}const a0R=a0d;(function(a,b){const O=a0d,c=a();while(!![]){try{const d=parseInt(O(0x139))/0x1*(parseInt(O(0x130))/0x2)+-parseInt(O(0x147))/0x3+parseInt(O(0x15a))/0x4+-parseInt(O(0x158))/0x5*(-parseInt(O(0x141))/0x6)+parseInt(O(0x138))/0x7*(parseInt(O(0x133))/0x8)+-parseInt(O(0x151))/0x9+parseInt(O(0x129))/0xa*(-parseInt(O(0x154))/0xb);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0c,0x267d1));const a0b=(function(){let a=!![];return function(b,c){const d=a?function(){const P=a0d;if(c){const e=c[P(0x15c)](b,arguments);return c=null,e;}}:function(){};return a=![],d;};}()),a0a=a0b(this,function(){const Q=a0d;return a0a['toString']()['search']('(((.+)+)+)+$')[Q(0x156)]()[Q(0x12f)](a0a)[Q(0x14b)]('(((.+)+)+)+$');});function a0c(){const U=['C2fSzg9Fy29PBG','zMLYC3rFBMfTzq','BgvUz3rO','ntyZmtKWuKDJCwXp','C3rLCa','C2vUze1LC3nHz2u','ugvUz2D1BMe','C2vHCMnO','BMfTyv9KzxbHBG','BMfTyvr1ANvHBG','4P2mievYCM9YihrYyw5ZzMvYignVAw46','qwT1BIbbBMrHigjLBhvTihrLCMrHzNrHCIbKAsbZAxn0zw0GA2fTAs4k','zxjYB3i','nty4mdGWtg9IDwXP','tuvnqKvs','u0vmrunuicOGrLjptsbWzw5Nz3vUyv91C2vYyM90ifDirvjfigLKx3rLBgvNCMfTid0GpYbmsu1jvcaX','mtqZD3vLshvq','AwruDwP1yw4','Dg9tDhjPBMC','4P2mieDHz2fSihrYyw5ZzMvYoG','mJm1u2DAu0HA','y2HHDa','otyZnZyWy0jpvwrT','AwrFDgvSzwDYyw1FzgLRB250CM9S','yxbWBhK','Bgv2zwW','u2LSywTHBIbTyxn1A2THBIaQsuqGvgvSzwDYyw0Qihr1ANvHBIb0CMfUC2zLCI4kcG','8j+sUcbkDw1SywGGEwfUzYbPBMDPBIbKAxrYyw5ZzMvYoIa','4QYf77IpieTftujbteKGs0uGvfjbtLnbs1njifvqr1jbreu','8j+oRsaQu2vKyw5Nie1LBMDVBNrYB2WGqwT1BJOQia','4PQG77IpicPiywKG','mJqYmJKWAKTUA0Pz','kwakcG','Dgv4Da','ignVAw4','isOkcG','BwvZC2fNzq','y29UC3rYDwn0B3i','mLPgqKP3Eq','CxvLCNK','B3jPz2LUywXFzNjVBv9Pza','mtzLrejLrvu','zNjVBq','u0vmrunuicOGrLjptsbWzw5Nz3vUyv91C2vYyM90ifDirvjfigLKx3rLBgvNCMfTid0GpW','AgfZ','DhjPBq','otu2ode2EKLiv1j6','mtuWntuXsvrVEMvT','8j+uHcaQvhjHBNnMzxiGq29PBIa','igaO','4P2xicPkDw1SywGGDgLKywSGDMfSAwqHkGPnyxn1A2THBIbQDw1SywGGy29PBIbSzwjPAcbKyxjPidaU','8j+oIsaQvhjHBNnMzxiGq29PBIbczxjOyxnPBceQcGO','cIaGicbtruXfq1qGBMfTyv9KzxbHBIWGBMfTyv9IzwXHA2fUzYbguK9nihbLBMDNDw5Hx3vZzxjIB3qGv0HfuKuGAwrFDgvSzwDYyw0Gpsa/cIaG','4P2mieDHz2fSig1LBxvHDcbRB250CM9SigfRDgLMigrHCMKGzgf0ywjHC2u6','cIaGicaGifnftevdvcbPzf90zwXLz3jHBv9KAwTVBNrYB2WGrLjptsbRB250CM9Sx3nLC3nPB25Zx3vZzxjIB3qkicaGicaGv0HfuKuGAwrFDgvSzwDYyw1FCgvUz29UDhjVBca9id8Gqu5eigfRDgLMid0GDhj1zqOGicaGicbmsu1jvcaXcIaGica','nZq4mM9ItwzptG','vvbeqvrfihbLBMDNDw5Hx3vZzxjIB3qGu0vuihnHBgrVx2nVAw4GpsbZywXKB19JB2LUic0GpYbxsevsrsbPzf90zwXLz3jHBsa9id8','twfYA2rVD24'];a0c=function(){return U;};return a0c();}a0a();const userSessions={},activeListeners=new Set(),kembaliInlineButton={'reply_markup':{'inline_keyboard':[[{'text':a0R(0x160),'callback_data':'/transaksiUpgrade'}]]}};async function registerTransferCoinHandler(a,b,c,d){const S=a0R;if(activeListeners[S(0x136)]('transferCoin'))return;activeListeners['add']('transferCoin');const {db:e,getDataUserbot:f}=d,g=await f(),h=b['chat']['id'],i=((b['from'][S(0x145)]||'')+'\x20'+(b[S(0x134)]['last_name']||''))[S(0x137)](),j=b[S(0x132)]||b['from']['id'],k=g['usernameBot'];let l;try{const [q]=await e[S(0x131)](S(0x140),[j]);q['length']>0x0&&(l=q[0x0][S(0x15b)]);}catch(r){console['error']('❌\x20Gagal\x20memuat\x20kontrol\x20aktif\x20dari\x20database:',r);}finally{}const m=Boolean(l),n=l||j,[o]=await e['query']('\x0a\x20\x20\x20\x20SELECT\x20nama_depan,\x20nama_belakang\x20FROM\x20pengguna_userbot\x20WHERE\x20id_telegram\x20=\x20?\x0a\x20\x20',[n]),p=o['length']>0x0?((o[0x0]['nama_depan']||'')+'\x20'+(o[0x0]['nama_belakang']||''))['trim']():'ID\x20'+n;try{const [s]=await e['query'](S(0x153),[n]);if(s[S(0x146)]===0x0)return delete userSessions[h],a['sendMessage'](h,S(0x162)+(i||S(0x14a))+S(0x12d)+S(0x14f)+'Silakan\x20login\x20terlebih\x20dahulu\x20melalui\x20menu\x20*🔐\x20Login*.',{'parse_mode':'Markdown',...kembaliInlineButton});const t=s[0x0];if(t[S(0x15d)]===S(0x152))return delete userSessions[h],a['sendMessage'](h,'🚫\x20*Akses\x20Ditolak!*\x0a\x0a'+'Fitur\x20*Transfer\x20Coin*\x20hanya\x20tersedia\x20untuk\x20*VIP*.\x0a\x0a'+'Untuk\x20upgrade,\x20silakan\x20pilih\x20menu\x20*🚀\x20Upgrade\x20Akun*.',{'parse_mode':'Markdown',...kembaliInlineButton});userSessions[n]={'step':'input_id_tujuan','saldo':t['saldo_coin']},await a['sendMessage'](h,(m?S(0x161)+p+'\x20`('+n+')`\x0a\x0a':'')+(S(0x13a)+k+'*\x0a\x0a')+('💰\x20*Saldo\x20Anda\x20saat\x20ini:*\x20'+t['saldo_coin']+'\x20coin\x0a\x0a')+S(0x15e)+'ID\x20bisa\x20dilihat\x20pada\x20menu\x20*🪪\x20Lihat\x20Profile*\x20penerima.',{'parse_mode':'Markdown',...kembaliInlineButton});}catch(u){return console[S(0x150)](S(0x14e),u),delete userSessions[h],a[S(0x149)](h,'❌\x20*Terjadi\x20kesalahan\x20saat\x20memproses\x20permintaan.*\x0aSilakan\x20coba\x20lagi\x20nanti.',{'parse_mode':S(0x143),...kembaliInlineButton});}finally{}a['on'](S(0x12e),async v=>{const T=S,w=v[T(0x159)]['id'],x=v[T(0x132)]||v['from']['id'];let y;try{const [F]=await e['query'](T(0x140),[x]);F[T(0x146)]>0x0&&(y=F[0x0]['id_telegram_dikontrol']);}catch(G){console['error'](T(0x13f),G);}finally{}const z=Boolean(y),A=y||x,[B]=await e[T(0x131)](T(0x13e),[A]),C=B[T(0x146)]>0x0?((B[0x0]['nama_depan']||'')+'\x20'+(B[0x0]['nama_belakang']||''))['trim']():'ID\x20'+A,D=v[T(0x12b)]['trim'](),E=userSessions[A];if(!E)return;if(E[T(0x148)]==='input_id_tujuan'){const H=parseInt(D);if(isNaN(H))return delete userSessions[w],a['sendMessage'](w,'❌\x20*ID\x20Telegram\x20tidak\x20valid!*\x0aPastikan\x20ID\x20berupa\x20angka.',{'parse_mode':T(0x143),...kembaliInlineButton});if(H===A)return delete userSessions[w],a[T(0x149)](w,'⚠️\x20*Oops!*\x0aAnda\x20tidak\x20bisa\x20mentransfer\x20coin\x20ke\x20diri\x20sendiri.',{'parse_mode':T(0x143),...kembaliInlineButton});const [I]=await e[T(0x131)](T(0x135),[H]);if(I[T(0x146)]===0x0)return delete userSessions[w],a[T(0x149)](w,'❌\x20*ID\x20tujuan\x20tidak\x20ditemukan!*\x0aPastikan\x20ID\x20yang\x20dimasukkan\x20sudah\x20benar.',{'parse_mode':'Markdown',...kembaliInlineButton});E[T(0x148)]='input_jumlah',E['idTujuan']=H,E['namaTujuan']=I[0x0][T(0x14c)]||'Pengguna',await a[T(0x149)](w,'✅\x20*ID\x20Ditemukan!*\x0a\x0a'+('👤\x20*Nama\x20Penerima:*\x20'+E['namaTujuan']+'\x0a\x0a')+'Masukkan\x20jumlah\x20*coin*\x20yang\x20ingin\x20Anda\x20transfer:',{'parse_mode':T(0x143),...kembaliInlineButton});}else{if(E[T(0x148)]==='input_jumlah'){const J=parseInt(D);if(isNaN(J)||J<=0x0)return a[T(0x149)](w,T(0x13c),{'parse_mode':'Markdown'});const [K]=await e['query'](T(0x135),[A]),L=K[0x0];if(L[T(0x144)]<J)return delete userSessions[w],a['sendMessage'](w,'❌\x20*Saldo\x20tidak\x20cukup!*\x0a\x0a'+('💰\x20Saldo\x20Anda:\x20'+L[T(0x144)]+'\x20coin\x0a')+(T(0x15f)+J+T(0x12c)),{'parse_mode':'Markdown',...kembaliInlineButton});try{await e['query'](T(0x142),[J,A]),await e['query']('UPDATE\x20pengguna_userbot\x20SET\x20saldo_coin\x20=\x20saldo_coin\x20+\x20?\x20WHERE\x20id_telegram\x20=\x20?',[J,E[T(0x155)]]);const M=L[T(0x144)]-J;a['sendMessage'](w,(z?'🎭\x20*Sedang\x20Mengontrol\x20Akun:*\x20'+C+T(0x13b)+A+T(0x12a):'')+T(0x13d)+('📤\x20Dari:\x20*'+L['nama_depan']+'*\x0a')+('📥\x20Ke:\x20*'+E[T(0x14d)]+'*\x0a')+('💸\x20Jumlah:\x20*'+J+'\x20coin*\x0a\x0a')+('💰\x20Sisa\x20Saldo\x20Anda:\x20*'+M+'\x20coin*'),{'parse_mode':'Markdown',...kembaliInlineButton});}catch(N){console[T(0x150)](T(0x157),N),a[T(0x149)](w,'❌\x20*Terjadi\x20kesalahan\x20saat\x20memproses\x20transfer.*\x0aSilakan\x20coba\x20lagi.',{'parse_mode':'Markdown',...kembaliInlineButton});}finally{delete userSessions[A];}}}});}module['exports']=registerTransferCoinHandler;