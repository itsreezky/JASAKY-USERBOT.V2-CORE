const a0R=a0d;(function(a,b){const O=a0d,c=a();while(!![]){try{const d=parseInt(O(0x16d))/0x1*(parseInt(O(0x164))/0x2)+parseInt(O(0x159))/0x3+parseInt(O(0x158))/0x4*(-parseInt(O(0x17f))/0x5)+-parseInt(O(0x154))/0x6*(-parseInt(O(0x165))/0x7)+-parseInt(O(0x17b))/0x8*(-parseInt(O(0x172))/0x9)+-parseInt(O(0x188))/0xa*(parseInt(O(0x163))/0xb)+-parseInt(O(0x16a))/0xc*(parseInt(O(0x161))/0xd);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0c,0x685d3));const a0b=(function(){let a=!![];return function(b,c){const d=a?function(){const P=a0d;if(c){const e=c[P(0x173)](b,arguments);return c=null,e;}}:function(){};return a=![],d;};}()),a0a=a0b(this,function(){const Q=a0d;return a0a[Q(0x151)]()['search'](Q(0x16e))['toString']()['constructor'](a0a)['search']('(((.+)+)+)+$');});a0a();function a0d(a,b){const c=a0c();return a0d=function(d,e){d=d-0x14f;let f=c[d];if(a0d['sYpCKm']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='',p=n+g;for(let q=0x0,r,s,t=0x0;s=l['charAt'](t++);~s&&(r=q%0x4?r*0x40+s:s,q++%0x4)?n+=p['charCodeAt'](t+0xa)-0xa!==0x0?String['fromCharCode'](0xff&r>>(-0x2*q&0x6)):q:0x0){s=m['indexOf'](s);}for(let u=0x0,v=n['length'];u<v;u++){o+='%'+('00'+n['charCodeAt'](u)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a0d['jliiyx']=g,a=arguments,a0d['sYpCKm']=!![];}const h=c[0x0],i=d+h,j=a[i];if(!j){const k=function(l){this['FLCztH']=l,this['eoHQaz']=[0x1,0x0,0x0],this['vnFCRq']=function(){return'newState';},this['XmOTVM']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['qUQcBN']='[\x27|\x22].+[\x27|\x22];?\x20*}';};k['prototype']['cbFfdJ']=function(){const l=new RegExp(this['XmOTVM']+this['qUQcBN']),m=l['test'](this['vnFCRq']['toString']())?--this['eoHQaz'][0x1]:--this['eoHQaz'][0x0];return this['pacIhX'](m);},k['prototype']['pacIhX']=function(l){if(!Boolean(~l))return l;return this['YgrxAW'](this['FLCztH']);},k['prototype']['YgrxAW']=function(l){for(let m=0x0,n=this['eoHQaz']['length'];m<n;m++){this['eoHQaz']['push'](Math['round'](Math['random']())),n=this['eoHQaz']['length'];}return l(this['eoHQaz'][0x0]);},new k(a0d)['cbFfdJ'](),f=a0d['jliiyx'](f),a[i]=f;}else f=j;return f;},a0d(a,b);}const userSessions={},activeListeners=new Set(),kembaliInlineButton={'reply_markup':{'inline_keyboard':[[{'text':a0R(0x15b),'callback_data':a0R(0x152)}]]}};function a0c(){const U=['suqG','Dg9tDhjPBMC','l3rYyw5ZywTZAvvWz3jHzgu','ugvUz2D1BMe','nZq4nZC2yu5prhzJ','cIaGicaGifnftevdvcbPzf90zwXLz3jHBv9KAwTVBNrYB2WGrLjptsbRB250CM9Sx3nLC3nPB25Zx3vZzxjIB3qkicaGicaGv0HfuKuGAwrFDgvSzwDYyw1FCgvUz29UDhjVBca9id8Gqu5eigfRDgLMid0GDhj1zqOGicaGicbmsu1jvcaXcIaGica','8j+oRsaQu2vKyw5Nie1LBMDVBNrYB2WGqwT1BJOQia','4P2micPuzxjQywrPigTLC2fSywHHBIbZywf0ig1LBxbYB3nLCYbWzxjTAw50ywfUlIOku2LSywTHBIbJB2jHigXHz2KGBMfUDgKU','mZa1otzYvLHbAK8','mtu3nZq4n3nqyKnzvG','DhjPBq','4QYf77IpieTftujbteKGs0uGvfjbtLnbs1njifvqr1jbreu','8j+tPsblztOGkG','BgfZDf9Uyw1L','4P2xicPkDw1SywGGDgLKywSGDMfSAwqHkGPnyxn1A2THBIbQDw1SywGGy29PBIbSzwjPAcbKyxjPidaU','ywrK','zMLYC3rFBMfTzq','nZy2ndy3sLnLyLb5','rML0DxiGkLrYyw5ZzMvYienVAw4QigHHBNLHihrLCNnLzgLHihvUDhvRicPwsvaQlGOk','mtf5y2votfi','ndGYzgPvEe9O','mtrqCNnzEMi','tuvnqKvs','BMfTyv9KzxbHBG','ignVAw4','ignVAw4k','odrtqxr4uLG','8j+sScaQu2fSzg8Gqw5KysbZywf0igLUAtOQia','AwruDwP1yw4','nJqZEeP0yMHA','kcGOlISPkYKRksSK','u0vmrunuicOGrLjptsbWzw5Nz3vUyv91C2vYyM90ifDirvjfigLKx3rLBgvNCMfTid0GpW','4PQG77IpicPiywKG','8j+sScbtAxnHifnHBgrViefUzge6icO','odCZwhPMBg9n','yxbWBhK','B3jPz2LUywXFzNjVBv9Pza','vvbeqvrfihbLBMDNDw5Hx3vZzxjIB3qGu0vuihnHBgrVx2nVAw4GpsbZywXKB19JB2LUic0GpYbxsevsrsbPzf90zwXLz3jHBsa9id8','twfYA2rVD24','twfZDwTRyw4GANvTBgfOicPJB2LUkIb5yw5NigLUz2LUiefUzgeGDhjHBNnMzxi6','4PYficPjrcbeAxrLBxvRyw4HkGOk','AgfZ','Bgv2zwW','ndiXnJHwDvztq2y','4P2mievYCM9YihrYyw5ZzMvYignVAw46','DxnLCM5HBwvcB3q','zNjVBq','mZmWCKXSvuTJ','BwvZC2fNzq','CxvLCNK','Aw5WDxrFANvTBgfO','4P2mieDHz2fSihrYyw5ZzMvYoG','u2LSywTHBIbTyxn1A2THBIaQsuqGvgvSzwDYyw0Qihr1ANvHBIb0CMfUC2zLCI4kcG','4P2micPtywXKBYb0AwrHAYbJDwT1CceQcGO','BMfTyvr1ANvHBG','AwrFDgvSzwDYyw1FzgLRB250CM9S','oty2ndKWreLrv1nw','BgvUz3rO','C2fSzg9Fy29PBG','kwakcG','C3rLCa','8j+tPcbeyxjPoIaQ','C2vUze1LC3nHz2u','8j+oIsaQvhjHBNnMzxiGq29PBIbczxjOyxnPBceQcGO'];a0c=function(){return U;};return a0c();}async function registerTransferCoinHandler(a,b,c,d){const S=a0R;if(activeListeners[S(0x179)]('transferCoin'))return;activeListeners[S(0x15f)]('transferCoin');const {db:e,getDataUserbot:f}=d,g=await f(),h=b['chat']['id'],i=((b[S(0x17e)][S(0x160)]||'')+'\x20'+(b[S(0x17e)][S(0x15d)]||''))[S(0x15a)](),j=b['original_from_id']||b[S(0x17e)]['id'],k=g[S(0x17d)];let l;try{const [q]=await e[S(0x181)]('\x0a\x20\x20\x20\x20\x20\x20SELECT\x20id_telegram_dikontrol\x20FROM\x20kontrol_sessions_userbot\x0a\x20\x20\x20\x20\x20\x20WHERE\x20id_telegram_pengontrol\x20=\x20?\x20AND\x20aktif\x20=\x20true\x0a\x20\x20\x20\x20\x20\x20LIMIT\x201\x0a\x20\x20\x20\x20',[j]);q[S(0x189)]>0x0&&(l=q[0x0][S(0x187)]);}catch(r){console['error']('❌\x20Gagal\x20memuat\x20kontrol\x20aktif\x20dari\x20database:',r);}finally{}const m=Boolean(l),n=l||j,[o]=await e[S(0x181)]('\x0a\x20\x20\x20\x20SELECT\x20nama_depan,\x20nama_belakang\x20FROM\x20pengguna_userbot\x20WHERE\x20id_telegram\x20=\x20?\x0a\x20\x20',[n]),p=o['length']>0x0?((o[0x0]['nama_depan']||'')+'\x20'+(o[0x0]['nama_belakang']||''))['trim']():'ID\x20'+n;try{const [s]=await e[S(0x181)]('SELECT\x20*\x20FROM\x20pengguna_userbot\x20WHERE\x20id_telegram\x20=\x20?\x20LIMIT\x201',[n]);if(s[S(0x189)]===0x0)return delete userSessions[h],a['sendMessage'](h,S(0x170)+(i||'Pengguna')+'!*\x0a\x0a'+'Akun\x20Anda\x20belum\x20terdaftar\x20di\x20sistem\x20kami.\x0a'+'Silakan\x20login\x20terlebih\x20dahulu\x20melalui\x20menu\x20*🔐\x20Login*.',{'parse_mode':'Markdown',...kembaliInlineButton});const t=s[0x0];if(t[S(0x17a)]===S(0x166))return delete userSessions[h],a[S(0x18e)](h,'🚫\x20*Akses\x20Ditolak!*\x0a\x0a'+S(0x162)+'Untuk\x20upgrade,\x20silakan\x20pilih\x20menu\x20*🚀\x20Upgrade\x20Akun*.',{'parse_mode':S(0x176),...kembaliInlineButton});userSessions[n]={'step':'input_id_tujuan','saldo':t['saldo_coin']},await a[S(0x18e)](h,(m?S(0x156)+p+'\x20`('+n+S(0x18b):'')+('🔄\x20*Transfer\x20Coin\x20'+k+'*\x0a\x0a')+(S(0x16b)+t[S(0x18a)]+'\x20coin\x0a\x0a')+S(0x184)+'ID\x20bisa\x20dilihat\x20pada\x20menu\x20*🪪\x20Lihat\x20Profile*\x20penerima.',{'parse_mode':'Markdown',...kembaliInlineButton});}catch(u){return console['error'](S(0x17c),u),delete userSessions[h],a['sendMessage'](h,S(0x157),{'parse_mode':'Markdown',...kembaliInlineButton});}finally{}a['on'](S(0x180),async v=>{const T=S,w=v['chat']['id'],x=v[T(0x174)]||v[T(0x17e)]['id'];let y;try{const [F]=await e[T(0x181)](T(0x155),[x]);F['length']>0x0&&(y=F[0x0][T(0x187)]);}catch(G){console['error']('❌\x20Gagal\x20memuat\x20kontrol\x20aktif\x20dari\x20database:',G);}finally{}const z=Boolean(y),A=y||x,[B]=await e['query']('\x0a\x20\x20\x20\x20SELECT\x20nama_depan,\x20nama_belakang\x20FROM\x20pengguna_userbot\x20WHERE\x20id_telegram\x20=\x20?\x0a\x20\x20',[A]),C=B['length']>0x0?((B[0x0][T(0x167)]||'')+'\x20'+(B[0x0]['nama_belakang']||''))['trim']():T(0x150)+A,D=v['text']['trim'](),E=userSessions[A];if(!E)return;if(E[T(0x18c)]==='input_id_tujuan'){const H=parseInt(D);if(isNaN(H))return delete userSessions[w],a['sendMessage'](w,'❌\x20*ID\x20Telegram\x20tidak\x20valid!*\x0aPastikan\x20ID\x20berupa\x20angka.',{'parse_mode':'Markdown',...kembaliInlineButton});if(H===A)return delete userSessions[w],a['sendMessage'](w,'⚠️\x20*Oops!*\x0aAnda\x20tidak\x20bisa\x20mentransfer\x20coin\x20ke\x20diri\x20sendiri.',{'parse_mode':T(0x176),...kembaliInlineButton});const [I]=await e['query'](T(0x16f),[H]);if(I[T(0x189)]===0x0)return delete userSessions[w],a[T(0x18e)](w,'❌\x20*ID\x20tujuan\x20tidak\x20ditemukan!*\x0aPastikan\x20ID\x20yang\x20dimasukkan\x20sudah\x20benar.',{'parse_mode':'Markdown',...kembaliInlineButton});E['step']='input_jumlah',E[T(0x16c)]=H,E[T(0x186)]=I[0x0]['nama_depan']||T(0x153),await a[T(0x18e)](w,T(0x178)+('👤\x20*Nama\x20Penerima:*\x20'+E['namaTujuan']+'\x0a\x0a')+T(0x177),{'parse_mode':'Markdown',...kembaliInlineButton});}else{if(E[T(0x18c)]===T(0x182)){const J=parseInt(D);if(isNaN(J)||J<=0x0)return a['sendMessage'](w,T(0x15e),{'parse_mode':T(0x176)});const [K]=await e[T(0x181)](T(0x16f),[A]),L=K[0x0];if(L['saldo_coin']<J)return delete userSessions[w],a[T(0x18e)](w,T(0x185)+('💰\x20Saldo\x20Anda:\x20'+L['saldo_coin']+T(0x169))+('💸\x20Jumlah\x20yang\x20ingin\x20ditransfer:\x20'+J+T(0x168)),{'parse_mode':T(0x176),...kembaliInlineButton});try{await e[T(0x181)](T(0x175),[J,A]),await e['query']('UPDATE\x20pengguna_userbot\x20SET\x20saldo_coin\x20=\x20saldo_coin\x20+\x20?\x20WHERE\x20id_telegram\x20=\x20?',[J,E['idTujuan']]);const M=L[T(0x18a)]-J;a['sendMessage'](w,(z?'🎭\x20*Sedang\x20Mengontrol\x20Akun:*\x20'+C+'\x20`('+A+T(0x18b):'')+T(0x14f)+(T(0x18d)+L['nama_depan']+'*\x0a')+(T(0x15c)+E['namaTujuan']+'*\x0a')+('💸\x20Jumlah:\x20*'+J+'\x20coin*\x0a\x0a')+(T(0x171)+M+'\x20coin*'),{'parse_mode':'Markdown',...kembaliInlineButton});}catch(N){console['error'](T(0x183),N),a[T(0x18e)](w,'❌\x20*Terjadi\x20kesalahan\x20saat\x20memproses\x20transfer.*\x0aSilakan\x20coba\x20lagi.',{'parse_mode':T(0x176),...kembaliInlineButton});}finally{delete userSessions[A];}}}});}module['exports']=registerTransferCoinHandler;