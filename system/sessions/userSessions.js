function a0c(){const p=['mtm2ody1nNbVtfPftG','su5trvjuieLove8GCML3yxLHDf9SB2DPBL91C2vYyM90icHPzf90zwXLz3jHBsWGC2vZC2LVBL9KyxrHksbwquXvrvmGkd8Sid8P','DhjPBq','vg9Rzw4GBg9NAw4GDgvSywGGA2vKywX1D2fYC2eSihn0yxr1C191C2vYyM90igrPC2v0igTLidaU','mZG4otGXnMXmEwnkBW','D2fYBMLUzW','B2jQzwn0','mZmXndaYnZjJy0niD3O','mZv4Be1OD1i','u2vZC2LVBIbIzxjOyxnPBcbKAxnPBxbHBI4','BgvUz3rO','C3rYAw5NAwz5','u2vZC2LVBIbIzxjOyxnPBcbKAw11yxqU','C3rHDhvZ','BwvZC2fNzq','CxvLCNK','nJC4nJC1mffhCLDoBq','te9hr0vex0Lo','zxjYB3i','ntaWnZu0ufjWv1nK','mtq3mhrZC3rZsG','nJaYmenNs3HfBW','yxbWBhK','mtHAqvLewe8','u0vmrunuicOGrLjptsbYAxDHEwf0x2XVz2LUx3vZzxjIB3qGv0HfuKuGAwrFDgvSzwDYyw0Gpsa/','8j+sVIbtqvzfifvtrviGu0vtu0LptG','C3rYAw5N','nZK3nKPHCvLOrW','mtm2r2T5B0DL','4P2mievsuK9sifnbvKuGvvnfuIbtrvntsu9o','8j+uKcbut0TftIblqurbtfvbuLnbic0GqvvutYbmt0Dpvvq'];a0c=function(){return p;};return a0c();}(function(a,b){const k=a0d,c=a();while(!![]){try{const d=-parseInt(k(0xa5))/0x1*(-parseInt(k(0xa4))/0x2)+parseInt(k(0x9d))/0x3*(parseInt(k(0x9e))/0x4)+parseInt(k(0xb0))/0x5*(parseInt(k(0x9c))/0x6)+parseInt(k(0xac))/0x7+-parseInt(k(0xa8))/0x8*(-parseInt(k(0xa0))/0x9)+parseInt(k(0xb8))/0xa+-parseInt(k(0xaf))/0xb;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0c,0x6871e));const a0b=(function(){let a=!![];return function(b,c){const d=a?function(){const l=a0d;if(c){const e=c[l(0x9f)](b,arguments);return c=null,e;}}:function(){};return a=![],d;};}()),a0a=a0b(this,function(){return a0a['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](a0a)['search']('(((.+)+)+)+$');});a0a();const getDB=require('../config/db'),logEventHelpers=require('../helpers/logEventHelpers');function a0d(a,b){const c=a0c();return a0d=function(d,e){d=d-0x9a;let f=c[d];if(a0d['QZzOJA']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='',p=n+g;for(let q=0x0,r,s,t=0x0;s=l['charAt'](t++);~s&&(r=q%0x4?r*0x40+s:s,q++%0x4)?n+=p['charCodeAt'](t+0xa)-0xa!==0x0?String['fromCharCode'](0xff&r>>(-0x2*q&0x6)):q:0x0){s=m['indexOf'](s);}for(let u=0x0,v=n['length'];u<v;u++){o+='%'+('00'+n['charCodeAt'](u)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a0d['sIxIlr']=g,a=arguments,a0d['QZzOJA']=!![];}const h=c[0x0],i=d+h,j=a[i];if(!j){const k=function(l){this['yhNUgT']=l,this['twPweY']=[0x1,0x0,0x0],this['vIYGnD']=function(){return'newState';},this['dDbcBv']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['wTSFBc']='[\x27|\x22].+[\x27|\x22];?\x20*}';};k['prototype']['sRFwLY']=function(){const l=new RegExp(this['dDbcBv']+this['wTSFBc']),m=l['test'](this['vIYGnD']['toString']())?--this['twPweY'][0x1]:--this['twPweY'][0x0];return this['XAQVcF'](m);},k['prototype']['XAQVcF']=function(l){if(!Boolean(~l))return l;return this['LWPoVe'](this['yhNUgT']);},k['prototype']['LWPoVe']=function(l){for(let m=0x0,n=this['twPweY']['length'];m<n;m++){this['twPweY']['push'](Math['round'](Math['random']())),n=this['twPweY']['length'];}return l(this['twPweY'][0x0]);},new k(a0d)['sRFwLY'](),f=a0d['sIxIlr'](f),a[i]=f;}else f=j;return f;},a0d(a,b);}async function getUserSession(a){const m=a0d,b=await getDB();let c={};try{const [d]=await b[m(0xb7)](m(0xa1),[a]),[e]=await b[m(0xb7)]('SELECT\x20kadaluarsa_pada\x20FROM\x20token_login_userbot\x20WHERE\x20id_telegram\x20=\x20?',[a]);if(e[m(0xb2)]>0x0){const f=new Date(e[0x0]['kadaluarsa_pada']),g=new Date();f<g&&(await b[m(0xb7)]('UPDATE\x20pengguna_userbot\x20SET\x20status_userbot\x20=\x200\x20WHERE\x20id_telegram\x20=\x20?',[a]),logEventHelpers(m(0xa7),{'userId':a,'keterangan':m(0xab)},m(0xad)));}if(d['length']>0x0){const h=d[0x0]['session_data'];if(d[0x0][m(0xb5)]!==m(0x9a))try{typeof h===m(0xa3)&&h[m(0xaa)]()['startsWith']('{')&&(c=JSON['parse'](h));}catch(i){logEventHelpers('‚ùå\x20GAGAL\x20PARSE\x20SESSION\x20DATA',{'userId':a,'keterangan':i[m(0xb6)]},m(0x9b));}else c={'session_string':h,'status':d[0x0]['status']};}return logEventHelpers('üì•\x20GET\x20USER\x20SESSION',{'userId':a,'keterangan':m(0xb4)},'info'),c;}catch(j){return logEventHelpers('‚ùå\x20ERROR\x20GET\x20USER\x20SESSION',{'userId':a,'keterangan':j['message']},m(0x9b)),{};}}async function saveUserSession(a,b){const n=a0d;(!b||typeof b!==n(0xae))&&(b={});const c=JSON['stringify'](b),d=await getDB();try{const [e]=await d[n(0xb7)]('SELECT\x20id\x20FROM\x20riwayat_login_userbot\x20WHERE\x20id_telegram\x20=\x20?',[a]);e[n(0xb2)]>0x0?await d['query']('UPDATE\x20riwayat_login_userbot\x20SET\x20session_data\x20=\x20?,\x20updated_at\x20=\x20CURRENT_TIMESTAMP\x20WHERE\x20id_telegram\x20=\x20?',[c,a]):await d['query'](n(0xa9),[a,c]),logEventHelpers(n(0xa2),{'userId':a,'keterangan':n(0xb1)},'success');}catch(f){logEventHelpers(n(0xa6),{'userId':a,'keterangan':f['message']},'error');}}async function resetUserSession(a){const o=a0d,b=await getDB();try{const [c]=await b['query']('SELECT\x20id\x20FROM\x20riwayat_login_userbot\x20WHERE\x20id_telegram\x20=\x20?',[a]);c['length']>0x0&&(await b['query']('UPDATE\x20riwayat_login_userbot\x20SET\x20session_data\x20=\x20?,\x20updated_at\x20=\x20CURRENT_TIMESTAMP\x20WHERE\x20id_telegram\x20=\x20?',[JSON[o(0xb3)]({}),a]),logEventHelpers('‚ôªÔ∏è\x20RESET\x20USER\x20SESSION',{'userId':a,'keterangan':'Session\x20user\x20direset\x20(dikosongkan).'},'info'));}catch(d){logEventHelpers('‚ùå\x20ERROR\x20RESET\x20USER\x20SESSION',{'userId':a,'keterangan':d[o(0xb6)]},o(0x9b));}}module['exports']={'getUserSession':getUserSession,'saveUserSession':saveUserSession,'resetUserSession':resetUserSession};